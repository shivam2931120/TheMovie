{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { Search, Bell, User, X } from \"lucide-react\";\nimport { UserButton, SignedIn, SignedOut, SignInButton, useUser } from \"@clerk/nextjs\";\nimport clsx from \"clsx\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nconst NAV_LINKS = [\n    { name: \"Movies\", href: \"/movies\" },\n    { name: \"TV Shows\", href: \"/tv\" },\n    { name: \"Discover\", href: \"/discover\" },\n    { name: \"Lists\", href: \"/lists\" },\n];\n\nexport function Navbar() {\n    const [isScrolled, setIsScrolled] = useState(false);\n    const [showSearch, setShowSearch] = useState(false);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const pathname = usePathname();\n    const router = useRouter();\n    const { user } = useUser();\n\n    useEffect(() => {\n        const handleScroll = () => {\n            setIsScrolled(window.scrollY > 0);\n        };\n        window.addEventListener(\"scroll\", handleScroll);\n        return () => window.removeEventListener(\"scroll\", handleScroll);\n    }, []);\n\n    const handleSearchCheck = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (searchQuery.trim()) {\n            router.push(`/search?q=${encodeURIComponent(searchQuery)}`);\n            setShowSearch(false);\n        }\n    };\n\n    return (\n        <nav\n            className={clsx(\n                \"fixed top-0 left-0 right-0 z-50 transition-all duration-300 border-b\",\n                isScrolled\n                    ? \"bg-black/80 backdrop-blur-xl border-white/5 py-4\"\n                    : \"bg-transparent border-transparent py-6\"\n            )}\n        >\n            <div className=\"container mx-auto px-6 lg:px-20 flex items-center justify-between\">\n                {/* Logo */}\n                <Link href=\"/\" className=\"flex items-center gap-2 relative z-50\">\n                    <span className=\"font-display font-bold text-2xl tracking-tight text-white\">\n                        The<span className=\"text-accent-primary\">Movie</span>\n                    </span>\n                </Link>\n\n                {/* Desktop Navigation */}\n                <div className=\"hidden md:flex items-center gap-8 absolute left-1/2 transform -translate-x-1/2\">\n                    {NAV_LINKS.map((link) => {\n                        const isActive = pathname === link.href;\n                        return (\n                            <Link\n                                key={link.name}\n                                href={link.href}\n                                className={clsx(\n                                    \"text-sm font-medium transition-all relative group\",\n                                    isActive ? \"text-white\" : \"text-text-secondary hover:text-white\"\n                                )}\n                            >\n                                {link.name}\n                                <span className={clsx(\n                                    \"absolute -bottom-1 left-0 w-full h-[2px] bg-accent-primary rounded-full transition-all duration-300\",\n                                    isActive ? \"opacity-100 scale-x-100\" : \"opacity-0 scale-x-0 group-hover:opacity-50 group-hover:scale-x-50\"\n                                )} />\n                            </Link>\n                        );\n                    })}\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex items-center gap-4\">\n                    {/* Search Bar */}\n                    <div className=\"relative flex items-center\">\n                        <AnimatePresence>\n                            {showSearch && (\n                                <motion.form\n                                    initial={{ width: 0, opacity: 0 }}\n                                    animate={{ width: 200, opacity: 1 }}\n                                    exit={{ width: 0, opacity: 0 }}\n                                    onSubmit={handleSearchCheck}\n                                    className=\"overflow-hidden mr-2\"\n                                >\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Search...\"\n                                        className=\"w-full bg-white/10 border border-white/10 rounded-full px-4 py-1.5 text-sm text-white focus:outline-none focus:border-accent-primary\"\n                                        autoFocus\n                                        value={searchQuery}\n                                        onChange={(e) => setSearchQuery(e.target.value)}\n                                    />\n                                </motion.form>\n                            )}\n                        </AnimatePresence>\n                        <button\n                            onClick={() => setShowSearch(!showSearch)}\n                            className=\"text-text-secondary hover:text-white transition-colors p-2\"\n                        >\n                            {showSearch ? <X size={20} /> : <Search size={20} />}\n                        </button>\n                    </div>\n\n                    <SignedIn>\n                        <Link href=\"/profile\">\n                            <button className=\"text-text-secondary hover:text-white transition-colors p-2\">\n                                <User size={20} />\n                            </button>\n                        </Link>\n                        <UserButton\n                            appearance={{\n                                elements: {\n                                    avatarBox: \"w-9 h-9 border-2 border-white/10 hover:border-text-primary transition-colors\"\n                                }\n                            }}\n                        />\n                    </SignedIn>\n                    <SignedOut>\n                        <SignInButton mode=\"modal\">\n                            <button className=\"px-5 py-2 bg-accent-primary hover:bg-accent-primary/90 text-white rounded-lg text-sm font-bold transition-all shadow-lg shadow-accent-primary/20\">\n                                Sign In\n                            </button>\n                        </SignInButton>\n                    </SignedOut>\n                </div>\n            </div>\n        </nav>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/lib/queryClient.ts"],"sourcesContent":["import { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\n\n// Create a client with optimal settings\nexport const queryClient = new QueryClient({\n    defaultOptions: {\n        queries: {\n            staleTime: 1000 * 60 * 5, // 5 minutes\n            gcTime: 1000 * 60 * 30, // 30 minutes (previously cacheTime)\n            refetchOnWindowFocus: false,\n            retry: 2,\n            retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n        },\n    },\n});\n\nexport { QueryClientProvider };\n\n// Query keys for caching\nexport const queryKeys = {\n    movies: {\n        all: [\"movies\"],\n        popular: (page: number) => [\"movies\", \"popular\", page],\n        trending: (timeWindow: string, page: number) => [\"movies\", \"trending\", timeWindow, page],\n        nowPlaying: (page: number) => [\"movies\", \"nowPlaying\", page],\n        upcoming: (page: number) => [\"movies\", \"upcoming\", page],\n        topRated: (page: number) => [\"movies\", \"topRated\", page],\n        search: (query: string, page: number) => [\"movies\", \"search\", query, page],\n        discover: (filters: any) => [\"movies\", \"discover\", filters],\n        details: (id: string | number) => [\"movies\", \"details\", id],\n        similar: (id: string | number, page: number) => [\"movies\", \"similar\", id, page],\n        reviews: (id: string | number, page: number) => [\"movies\", \"reviews\", id, page],\n        trailer: (id: string | number) => [\"movies\", \"trailer\", id],\n    },\n    collections: {\n        all: [\"collections\"],\n        details: (id: number | string) => [\"collections\", id],\n    },\n    genres: [\"genres\"],\n    era: (era: string, page: number) => [\"era\", era, page],\n    awards: (category: string, page: number) => [\"awards\", category, page],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,MAAM,cAAc,IAAI,+LAAW,CAAC;IACvC,gBAAgB;QACZ,SAAS;YACL,WAAW,OAAO,KAAK;YACvB,QAAQ,OAAO,KAAK;YACpB,sBAAsB;YACtB,OAAO;YACP,YAAY,CAAC,eAAiB,KAAK,GAAG,CAAC,OAAO,KAAK,cAAc;QACrE;IACJ;AACJ;;AAKO,MAAM,YAAY;IACrB,QAAQ;QACJ,KAAK;YAAC;SAAS;QACf,SAAS,CAAC,OAAiB;gBAAC;gBAAU;gBAAW;aAAK;QACtD,UAAU,CAAC,YAAoB,OAAiB;gBAAC;gBAAU;gBAAY;gBAAY;aAAK;QACxF,YAAY,CAAC,OAAiB;gBAAC;gBAAU;gBAAc;aAAK;QAC5D,UAAU,CAAC,OAAiB;gBAAC;gBAAU;gBAAY;aAAK;QACxD,UAAU,CAAC,OAAiB;gBAAC;gBAAU;gBAAY;aAAK;QACxD,QAAQ,CAAC,OAAe,OAAiB;gBAAC;gBAAU;gBAAU;gBAAO;aAAK;QAC1E,UAAU,CAAC,UAAiB;gBAAC;gBAAU;gBAAY;aAAQ;QAC3D,SAAS,CAAC,KAAwB;gBAAC;gBAAU;gBAAW;aAAG;QAC3D,SAAS,CAAC,IAAqB,OAAiB;gBAAC;gBAAU;gBAAW;gBAAI;aAAK;QAC/E,SAAS,CAAC,IAAqB,OAAiB;gBAAC;gBAAU;gBAAW;gBAAI;aAAK;QAC/E,SAAS,CAAC,KAAwB;gBAAC;gBAAU;gBAAW;aAAG;IAC/D;IACA,aAAa;QACT,KAAK;YAAC;SAAc;QACpB,SAAS,CAAC,KAAwB;gBAAC;gBAAe;aAAG;IACzD;IACA,QAAQ;QAAC;KAAS;IAClB,KAAK,CAAC,KAAa,OAAiB;YAAC;YAAO;YAAK;SAAK;IACtD,QAAQ,CAAC,UAAkB,OAAiB;YAAC;YAAU;YAAU;SAAK;AAC1E"}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/watchlist-context.js"],"sourcesContent":["import { createContext, useContext } from \"react\";\n\nexport const WatchlistContext = createContext(null);\n\nexport function useWatchlist() {\n  const ctx = useContext(WatchlistContext);\n  if (!ctx) {\n    return {\n      items: [],\n      movies: [],\n      tvShows: [],\n      count: 0,\n      add: () => {},\n      remove: () => {},\n      toggle: () => {},\n      has: () => false,\n    };\n  }\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;;AAEO,MAAM,iCAAmB,IAAA,8KAAa,EAAC;AAEvC,SAAS;;IACd,MAAM,MAAM,IAAA,2KAAU,EAAC;IACvB,IAAI,CAAC,KAAK;QACR,OAAO;YACL,OAAO,EAAE;YACT,QAAQ,EAAE;YACV,SAAS,EAAE;YACX,OAAO;YACP,KAAK,KAAO;YACZ,QAAQ,KAAO;YACf,QAAQ,KAAO;YACf,KAAK,IAAM;QACb;IACF;IACA,OAAO;AACT;GAfgB"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/WatchlistContext.jsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\nimport { WatchlistContext } from \"./watchlist-context\";\n\nconst STORAGE_KEY = \"movie_catalogue_watchlist_v1\";\n\nexport function WatchlistProvider({ children }) {\n  const { user, isSignedIn, isLoaded } = useUser();\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    if (isSignedIn && user) {\n      const userWatchlist = user.unsafeMetadata?.watchlist || [];\n      const migratedItems = userWatchlist.map(item => {\n        if (item.type) return item; // Already has type\n        const isTv = (item.name && !item.title) || item.image?.medium || item.premiered;\n        return { ...item, type: isTv ? 'tv' : 'movie' };\n      });\n      console.log('Loaded watchlist items (migrated):', migratedItems); // Debug\n      setItems(migratedItems);\n    } else {\n      try {\n        const raw = localStorage.getItem(STORAGE_KEY);\n        const storedItems = raw ? JSON.parse(raw) : [];\n        const migratedItems = storedItems.map(item => {\n          if (item.type) return item; // Already has type\n          const isTv = (item.name && !item.title) || item.image?.medium || item.premiered;\n          return { ...item, type: isTv ? 'tv' : 'movie' };\n        });\n        console.log('Loaded watchlist items from localStorage (migrated):', migratedItems); // Debug\n        setItems(migratedItems);\n      } catch {\n        setItems([]);\n      }\n    }\n  }, [isSignedIn, user, isLoaded]);\n\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    if (isSignedIn && user) {\n      user.update({\n        unsafeMetadata: {\n          ...user.unsafeMetadata,\n          watchlist: items\n        }\n      }).catch(err => console.error(\"Failed to save watchlist:\", err));\n    } else {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n      } catch {\n      }\n    }\n  }, [items, isSignedIn, user, isLoaded]);\n\n  const add = useCallback((item) => {\n    const itemWithType = { ...item, type: item.type || 'movie' };\n    setItems((prev) => (prev.find((m) => m.id === item.id && m.type === itemWithType.type) ? prev : [itemWithType, ...prev]));\n  }, []);\n  \n  const remove = useCallback((id, type = 'movie') => setItems((prev) => prev.filter((m) => !(m.id === id && m.type === type))), []);\n  \n  const toggle = useCallback((item) => {\n    const itemWithType = { ...item, type: item.type || 'movie' };\n    setItems((prev) => (\n      prev.find((m) => m.id === item.id && m.type === itemWithType.type) \n        ? prev.filter((m) => !(m.id === item.id && m.type === itemWithType.type))\n        : [itemWithType, ...prev]\n    ));\n  }, []);\n  \n  const has = useCallback((id, type = 'movie') => items.some((m) => m.id === id && m.type === type), [items]);\n\n  const movies = useMemo(() => items.filter(i => i.type === 'movie' || !i.type), [items]);\n  const tvShows = useMemo(() => items.filter(i => i.type === 'tv'), [items]);\n\n  const value = useMemo(() => ({ \n    items, \n    movies,\n    tvShows,\n    add, \n    remove, \n    toggle, \n    has, \n    count: items.length \n  }), [items, movies, tvShows, add, remove, toggle, has]);\n  return <WatchlistContext.Provider value={value}>{children}</WatchlistContext.Provider>;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 646, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/watched-core.js"],"sourcesContent":["import { createContext } from \"react\";\n\nexport const WatchedContext = createContext(null);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,+BAAiB,IAAA,8KAAa,EAAC"}},
    {"offset": {"line": 660, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/WatchedContext.jsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\nimport { WatchedContext } from \"./watched-core\";\n\n\nconst STORAGE_KEY = \"movie_catalogue_watched_v1\";\n\nexport function WatchedProvider({ children }) {\n  const { user, isSignedIn, isLoaded } = useUser();\n  const [items, setItems] = useState([]);\n\n  const [isDataLoaded, setIsDataLoaded] = useState(false);\n\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    setIsDataLoaded(false);\n\n    if (isSignedIn && user) {\n      const userWatched = user.unsafeMetadata?.watched || [];\n      const migratedItems = userWatched.map(item => {\n        if (item.type) return item; // Already has type\n        const isTv = (item.name && !item.title) || item.image?.medium || item.premiered;\n        return { ...item, type: isTv ? 'tv' : 'movie' };\n      });\n      console.log('Loaded watched items (migrated):', migratedItems); // Debug\n      setItems(migratedItems);\n    } else {\n      try {\n        const raw = localStorage.getItem(STORAGE_KEY);\n        const storedItems = raw ? JSON.parse(raw) : [];\n        const migratedItems = storedItems.map(item => {\n          if (item.type) return item; // Already has type\n          const isTv = (item.name && !item.title) || item.image?.medium || item.premiered;\n          return { ...item, type: isTv ? 'tv' : 'movie' };\n        });\n        console.log('Loaded watched items from localStorage (migrated):', migratedItems); // Debug\n        setItems(migratedItems);\n      } catch {\n        setItems([]);\n      }\n    }\n\n    setIsDataLoaded(true);\n  }, [isSignedIn, user, isLoaded]);\n\n  useEffect(() => {\n    if (!isDataLoaded) return;\n\n    if (isSignedIn && user) {\n      user\n        .update({\n          unsafeMetadata: {\n            ...user.unsafeMetadata,\n            watched: items,\n          },\n        })\n        .catch((err) => console.error(\"Failed to save watched:\", err));\n    } else {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n      } catch {\n      }\n    }\n  }, [items, isSignedIn, user, isDataLoaded]);\n\n  const add = useCallback((item) => {\n    const itemWithType = {\n      ...item,\n      type: item.type || 'movie',\n      watchedAt: item.watchedAt || new Date().toISOString(),\n    };\n    setItems((prev) => (prev.find((m) => m.id === item.id && m.type === itemWithType.type) ? prev : [itemWithType, ...prev]));\n  }, []);\n\n  const remove = useCallback((id, type = 'movie') => setItems((prev) => prev.filter((m) => !(m.id === id && m.type === type))), []);\n\n  const toggle = useCallback((item) => {\n    const itemWithType = {\n      ...item,\n      type: item.type || 'movie',\n      watchedAt: item.watchedAt || new Date().toISOString(),\n    };\n    setItems((prev) => (\n      prev.find((m) => m.id === item.id && m.type === itemWithType.type)\n        ? prev.filter((m) => !(m.id === item.id && m.type === itemWithType.type))\n        : [itemWithType, ...prev]\n    ));\n  }, []);\n\n  const has = useCallback((id, type = 'movie') => items.some((m) => m.id === id && m.type === type), [items]);\n\n  const movies = useMemo(() => items.filter(i => i.type === 'movie' || !i.type), [items]);\n  const tvShows = useMemo(() => items.filter(i => i.type === 'tv'), [items]);\n\n  const count = items.length;\n  const watchedCount = count;\n\n  const value = useMemo(\n    () => ({ items, movies, tvShows, add, remove, toggle, has, count, watchedCount }),\n    [items, movies, tvShows, add, remove, toggle, has, count, watchedCount]\n  );\n\n  return <WatchedContext.Provider value={value}>{children}</WatchedContext.Provider>;\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 861, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/ReviewContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nconst ReviewContext = createContext();\n\nexport function ReviewProvider({ children }) {\n    const { user, isSignedIn } = useUser();\n    const [reviews, setReviews] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    // Load reviews from user metadata or localStorage\n    useEffect(() => {\n        const loadReviews = async () => {\n            try {\n                if (isSignedIn && user) {\n                    const savedReviews = user.unsafeMetadata?.reviews;\n                    if (savedReviews) {\n                        setReviews(savedReviews);\n                    }\n                } else {\n                    const localReviews = localStorage.getItem(\"userReviews\");\n                    if (localReviews) {\n                        setReviews(JSON.parse(localReviews));\n                    }\n                }\n            } catch (error) {\n                console.error(\"Failed to load reviews:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadReviews();\n    }, [user, isSignedIn]);\n\n    // Save reviews\n    const saveReviews = async (newReviews) => {\n        try {\n            if (isSignedIn && user) {\n                await user.update({\n                    unsafeMetadata: {\n                        ...user.unsafeMetadata,\n                        reviews: newReviews,\n                    },\n                });\n            } else {\n                localStorage.setItem(\"userReviews\", JSON.stringify(newReviews));\n            }\n        } catch (error) {\n            console.error(\"Failed to save reviews:\", error);\n        }\n    };\n\n    // Add a review\n    const addReview = async (movieId, movieTitle, poster, rating, content) => {\n        const newReview = {\n            id: `${movieId}-${Date.now()}`,\n            movieId,\n            movieTitle,\n            poster,\n            rating,\n            content,\n            createdAt: new Date().toISOString(),\n        };\n\n        const updatedReviews = [newReview, ...reviews];\n        setReviews(updatedReviews);\n        await saveReviews(updatedReviews);\n        return newReview;\n    };\n\n    // Update a review\n    const updateReview = async (reviewId, updates) => {\n        const updatedReviews = reviews.map((r) =>\n            r.id === reviewId ? { ...r, ...updates, updatedAt: new Date().toISOString() } : r\n        );\n        setReviews(updatedReviews);\n        await saveReviews(updatedReviews);\n    };\n\n    // Delete a review\n    const deleteReview = async (reviewId) => {\n        const updatedReviews = reviews.filter((r) => r.id !== reviewId);\n        setReviews(updatedReviews);\n        await saveReviews(updatedReviews);\n    };\n\n    // Get review for a specific movie\n    const getReviewForMovie = (movieId) => {\n        return reviews.find((r) => r.movieId === String(movieId));\n    };\n\n    // Get average rating\n    const getAverageRating = () => {\n        if (reviews.length === 0) return 0;\n        const sum = reviews.reduce((acc, r) => acc + (r.rating || 0), 0);\n        return sum / reviews.length;\n    };\n\n    return (\n        <ReviewContext.Provider\n            value={{\n                reviews,\n                loading,\n                addReview,\n                updateReview,\n                deleteReview,\n                getReviewForMovie,\n                getAverageRating,\n            }}\n        >\n            {children}\n        </ReviewContext.Provider>\n    );\n}\n\nexport function useReviews() {\n    const context = useContext(ReviewContext);\n    if (!context) {\n        throw new Error(\"useReviews must be used within ReviewProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AAEA,MAAM,8BAAgB,IAAA,8KAAa;AAE5B,SAAS,eAAe,EAAE,QAAQ,EAAE;;IACvC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,qLAAO;IACpC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,kDAAkD;IAClD,IAAA,0KAAS;oCAAC;YACN,MAAM;wDAAc;oBAChB,IAAI;wBACA,IAAI,cAAc,MAAM;4BACpB,MAAM,eAAe,KAAK,cAAc,EAAE;4BAC1C,IAAI,cAAc;gCACd,WAAW;4BACf;wBACJ,OAAO;4BACH,MAAM,eAAe,aAAa,OAAO,CAAC;4BAC1C,IAAI,cAAc;gCACd,WAAW,KAAK,KAAK,CAAC;4BAC1B;wBACJ;oBACJ,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,2BAA2B;oBAC7C,SAAU;wBACN,WAAW;oBACf;gBACJ;;YACA;QACJ;mCAAG;QAAC;QAAM;KAAW;IAErB,eAAe;IACf,MAAM,cAAc,OAAO;QACvB,IAAI;YACA,IAAI,cAAc,MAAM;gBACpB,MAAM,KAAK,MAAM,CAAC;oBACd,gBAAgB;wBACZ,GAAG,KAAK,cAAc;wBACtB,SAAS;oBACb;gBACJ;YACJ,OAAO;gBACH,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;YACvD;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC7C;IACJ;IAEA,eAAe;IACf,MAAM,YAAY,OAAO,SAAS,YAAY,QAAQ,QAAQ;QAC1D,MAAM,YAAY;YACd,IAAI,GAAG,QAAQ,CAAC,EAAE,KAAK,GAAG,IAAI;YAC9B;YACA;YACA;YACA;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACrC;QAEA,MAAM,iBAAiB;YAAC;eAAc;SAAQ;QAC9C,WAAW;QACX,MAAM,YAAY;QAClB,OAAO;IACX;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO,UAAU;QAClC,MAAM,iBAAiB,QAAQ,GAAG,CAAC,CAAC,IAChC,EAAE,EAAE,KAAK,WAAW;gBAAE,GAAG,CAAC;gBAAE,GAAG,OAAO;gBAAE,WAAW,IAAI,OAAO,WAAW;YAAG,IAAI;QAEpF,WAAW;QACX,MAAM,YAAY;IACtB;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO;QACxB,MAAM,iBAAiB,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACtD,WAAW;QACX,MAAM,YAAY;IACtB;IAEA,kCAAkC;IAClC,MAAM,oBAAoB,CAAC;QACvB,OAAO,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,OAAO;IACpD;IAEA,qBAAqB;IACrB,MAAM,mBAAmB;QACrB,IAAI,QAAQ,MAAM,KAAK,GAAG,OAAO;QACjC,MAAM,MAAM,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,MAAM,IAAI,CAAC,GAAG;QAC9D,OAAO,MAAM,QAAQ,MAAM;IAC/B;IAEA,qBACI,6LAAC,cAAc,QAAQ;QACnB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GA5GgB;;QACiB,qLAAO;;;KADxB;AA8GT,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 1013, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/ListsContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nconst ListsContext = createContext();\n\n// Default pre-made lists\nconst DEFAULT_LISTS = [\n    { id: \"favorites\", name: \"My Favorites\", icon: \"â¤ï¸\", isDefault: true, movies: [] },\n    { id: \"to-rewatch\", name: \"Want to Rewatch\", icon: \"ðŸ”„\", isDefault: true, movies: [] },\n];\n\nexport function ListsProvider({ children }) {\n    const { user, isSignedIn } = useUser();\n    const [lists, setLists] = useState(DEFAULT_LISTS);\n    const [loading, setLoading] = useState(true);\n\n    // Load lists from user metadata or localStorage\n    useEffect(() => {\n        const loadLists = async () => {\n            try {\n                if (isSignedIn && user) {\n                    const savedLists = user.unsafeMetadata?.customLists;\n                    if (savedLists && savedLists.length > 0) {\n                        setLists(savedLists);\n                    }\n                } else {\n                    const localLists = localStorage.getItem(\"customLists\");\n                    if (localLists) {\n                        setLists(JSON.parse(localLists));\n                    }\n                }\n            } catch (error) {\n                console.error(\"Failed to load lists:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadLists();\n    }, [user, isSignedIn]);\n\n    // Save lists\n    const saveLists = async (newLists) => {\n        try {\n            if (isSignedIn && user) {\n                await user.update({\n                    unsafeMetadata: {\n                        ...user.unsafeMetadata,\n                        customLists: newLists,\n                    },\n                });\n            } else {\n                localStorage.setItem(\"customLists\", JSON.stringify(newLists));\n            }\n        } catch (error) {\n            console.error(\"Failed to save lists:\", error);\n        }\n    };\n\n    // Create a new list\n    const createList = async (name, icon = \"ðŸ“‹\") => {\n        const newList = {\n            id: `list-${Date.now()}`,\n            name,\n            icon,\n            isDefault: false,\n            movies: [],\n            createdAt: new Date().toISOString(),\n            isPublic: false,\n        };\n\n        const updatedLists = [...lists, newList];\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n        return newList;\n    };\n\n    // Delete a list\n    const deleteList = async (listId) => {\n        const list = lists.find((l) => l.id === listId);\n        if (list?.isDefault) return; // Can't delete default lists\n\n        const updatedLists = lists.filter((l) => l.id !== listId);\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Rename a list\n    const renameList = async (listId, newName) => {\n        const updatedLists = lists.map((l) =>\n            l.id === listId ? { ...l, name: newName } : l\n        );\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Toggle list public/private\n    const toggleListPublic = async (listId) => {\n        const updatedLists = lists.map((l) =>\n            l.id === listId ? { ...l, isPublic: !l.isPublic } : l\n        );\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Add movie to list\n    const addToList = async (listId, movie) => {\n        const updatedLists = lists.map((l) => {\n            if (l.id !== listId) return l;\n            if (l.movies.some((m) => m.id === movie.id)) return l;\n            return { ...l, movies: [...l.movies, movie] };\n        });\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Remove movie from list\n    const removeFromList = async (listId, movieId) => {\n        const updatedLists = lists.map((l) => {\n            if (l.id !== listId) return l;\n            return { ...l, movies: l.movies.filter((m) => m.id !== movieId) };\n        });\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Check if movie is in list\n    const isInList = (listId, movieId) => {\n        const list = lists.find((l) => l.id === listId);\n        return list?.movies.some((m) => m.id === movieId) || false;\n    };\n\n    // Get share link for public list\n    const getShareLink = (listId) => {\n        const list = lists.find((l) => l.id === listId);\n        if (!list?.isPublic) return null;\n        // This would need backend support for real sharing\n        // For now, create a shareable data URL\n        const data = btoa(JSON.stringify({ name: list.name, movies: list.movies.map(m => m.id) }));\n        return `${window.location.origin}/shared-list/${data}`;\n    };\n\n    return (\n        <ListsContext.Provider\n            value={{\n                lists,\n                loading,\n                createList,\n                deleteList,\n                renameList,\n                toggleListPublic,\n                addToList,\n                removeFromList,\n                isInList,\n                getShareLink,\n            }}\n        >\n            {children}\n        </ListsContext.Provider>\n    );\n}\n\nexport function useLists() {\n    const context = useContext(ListsContext);\n    if (!context) {\n        throw new Error(\"useLists must be used within ListsProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AAEA,MAAM,6BAAe,IAAA,8KAAa;AAElC,yBAAyB;AACzB,MAAM,gBAAgB;IAClB;QAAE,IAAI;QAAa,MAAM;QAAgB,MAAM;QAAM,WAAW;QAAM,QAAQ,EAAE;IAAC;IACjF;QAAE,IAAI;QAAc,MAAM;QAAmB,MAAM;QAAM,WAAW;QAAM,QAAQ,EAAE;IAAC;CACxF;AAEM,SAAS,cAAc,EAAE,QAAQ,EAAE;;IACtC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,qLAAO;IACpC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,gDAAgD;IAChD,IAAA,0KAAS;mCAAC;YACN,MAAM;qDAAY;oBACd,IAAI;wBACA,IAAI,cAAc,MAAM;4BACpB,MAAM,aAAa,KAAK,cAAc,EAAE;4BACxC,IAAI,cAAc,WAAW,MAAM,GAAG,GAAG;gCACrC,SAAS;4BACb;wBACJ,OAAO;4BACH,MAAM,aAAa,aAAa,OAAO,CAAC;4BACxC,IAAI,YAAY;gCACZ,SAAS,KAAK,KAAK,CAAC;4BACxB;wBACJ;oBACJ,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,yBAAyB;oBAC3C,SAAU;wBACN,WAAW;oBACf;gBACJ;;YACA;QACJ;kCAAG;QAAC;QAAM;KAAW;IAErB,aAAa;IACb,MAAM,YAAY,OAAO;QACrB,IAAI;YACA,IAAI,cAAc,MAAM;gBACpB,MAAM,KAAK,MAAM,CAAC;oBACd,gBAAgB;wBACZ,GAAG,KAAK,cAAc;wBACtB,aAAa;oBACjB;gBACJ;YACJ,OAAO;gBACH,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;YACvD;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;QAC3C;IACJ;IAEA,oBAAoB;IACpB,MAAM,aAAa,OAAO,MAAM,OAAO,IAAI;QACvC,MAAM,UAAU;YACZ,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACxB;YACA;YACA,WAAW;YACX,QAAQ,EAAE;YACV,WAAW,IAAI,OAAO,WAAW;YACjC,UAAU;QACd;QAEA,MAAM,eAAe;eAAI;YAAO;SAAQ;QACxC,SAAS;QACT,MAAM,UAAU;QAChB,OAAO;IACX;IAEA,gBAAgB;IAChB,MAAM,aAAa,OAAO;QACtB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACxC,IAAI,MAAM,WAAW,QAAQ,6BAA6B;QAE1D,MAAM,eAAe,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAClD,SAAS;QACT,MAAM,UAAU;IACpB;IAEA,gBAAgB;IAChB,MAAM,aAAa,OAAO,QAAQ;QAC9B,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC,IAC5B,EAAE,EAAE,KAAK,SAAS;gBAAE,GAAG,CAAC;gBAAE,MAAM;YAAQ,IAAI;QAEhD,SAAS;QACT,MAAM,UAAU;IACpB;IAEA,6BAA6B;IAC7B,MAAM,mBAAmB,OAAO;QAC5B,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC,IAC5B,EAAE,EAAE,KAAK,SAAS;gBAAE,GAAG,CAAC;gBAAE,UAAU,CAAC,EAAE,QAAQ;YAAC,IAAI;QAExD,SAAS;QACT,MAAM,UAAU;IACpB;IAEA,oBAAoB;IACpB,MAAM,YAAY,OAAO,QAAQ;QAC7B,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC;YAC5B,IAAI,EAAE,EAAE,KAAK,QAAQ,OAAO;YAC5B,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM,EAAE,GAAG,OAAO;YACpD,OAAO;gBAAE,GAAG,CAAC;gBAAE,QAAQ;uBAAI,EAAE,MAAM;oBAAE;iBAAM;YAAC;QAChD;QACA,SAAS;QACT,MAAM,UAAU;IACpB;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,OAAO,QAAQ;QAClC,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC;YAC5B,IAAI,EAAE,EAAE,KAAK,QAAQ,OAAO;YAC5B,OAAO;gBAAE,GAAG,CAAC;gBAAE,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAAS;QACpE;QACA,SAAS;QACT,MAAM,UAAU;IACpB;IAEA,4BAA4B;IAC5B,MAAM,WAAW,CAAC,QAAQ;QACtB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACxC,OAAO,MAAM,OAAO,KAAK,CAAC,IAAM,EAAE,EAAE,KAAK,YAAY;IACzD;IAEA,iCAAiC;IACjC,MAAM,eAAe,CAAC;QAClB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACxC,IAAI,CAAC,MAAM,UAAU,OAAO;QAC5B,mDAAmD;QACnD,uCAAuC;QACvC,MAAM,OAAO,KAAK,KAAK,SAAS,CAAC;YAAE,MAAM,KAAK,IAAI;YAAE,QAAQ,KAAK,MAAM,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE;QAAE;QACvF,OAAO,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,aAAa,EAAE,MAAM;IAC1D;IAEA,qBACI,6LAAC,aAAa,QAAQ;QAClB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GApJgB;;QACiB,qLAAO;;;KADxB;AAsJT,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 1230, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/SocialContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nconst SocialContext = createContext();\n\nexport function SocialProvider({ children }) {\n    const { user, isSignedIn } = useUser();\n    const [following, setFollowing] = useState([]);\n    const [followers, setFollowers] = useState([]);\n    const [activityFeed, setActivityFeed] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    // Load social data\n    useEffect(() => {\n        const loadSocialData = async () => {\n            try {\n                if (isSignedIn && user) {\n                    const socialData = user.unsafeMetadata?.social || {};\n                    setFollowing(socialData.following || []);\n                    setFollowers(socialData.followers || []);\n                    setActivityFeed(socialData.activityFeed || []);\n                } else {\n                    const local = localStorage.getItem(\"socialData\");\n                    if (local) {\n                        const parsed = JSON.parse(local);\n                        setFollowing(parsed.following || []);\n                        setActivityFeed(parsed.activityFeed || []);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Failed to load social data:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadSocialData();\n    }, [user, isSignedIn]);\n\n    // Save social data\n    const saveSocialData = async (data) => {\n        try {\n            if (isSignedIn && user) {\n                await user.update({\n                    unsafeMetadata: {\n                        ...user.unsafeMetadata,\n                        social: data,\n                    },\n                });\n            } else {\n                localStorage.setItem(\"socialData\", JSON.stringify(data));\n            }\n        } catch (error) {\n            console.error(\"Failed to save social data:\", error);\n        }\n    };\n\n    // Follow a user\n    const followUser = async (targetUser) => {\n        if (following.some(f => f.id === targetUser.id)) return;\n\n        const newFollowing = [...following, {\n            id: targetUser.id,\n            username: targetUser.username || targetUser.firstName || \"User\",\n            imageUrl: targetUser.imageUrl,\n            followedAt: new Date().toISOString(),\n        }];\n\n        setFollowing(newFollowing);\n        await saveSocialData({ following: newFollowing, followers, activityFeed });\n\n        // Add activity\n        addActivity({\n            type: \"follow\",\n            targetUser: targetUser.username || targetUser.firstName,\n            targetUserId: targetUser.id,\n        });\n    };\n\n    // Unfollow a user\n    const unfollowUser = async (userId) => {\n        const newFollowing = following.filter(f => f.id !== userId);\n        setFollowing(newFollowing);\n        await saveSocialData({ following: newFollowing, followers, activityFeed });\n    };\n\n    // Check if following\n    const isFollowing = (userId) => {\n        return following.some(f => f.id === userId);\n    };\n\n    // Add activity\n    const addActivity = async (activity) => {\n        const newActivity = {\n            id: `activity-${Date.now()}`,\n            userId: user?.id || \"guest\",\n            username: user?.username || user?.firstName || \"Guest\",\n            userImage: user?.imageUrl,\n            timestamp: new Date().toISOString(),\n            ...activity,\n        };\n\n        const newFeed = [newActivity, ...activityFeed].slice(0, 50); // Keep last 50\n        setActivityFeed(newFeed);\n        await saveSocialData({ following, followers, activityFeed: newFeed });\n    };\n\n    // Get user profile data\n    const getProfile = () => {\n        if (!isSignedIn || !user) return null;\n\n        return {\n            id: user.id,\n            username: user.username || user.firstName || \"User\",\n            firstName: user.firstName,\n            lastName: user.lastName,\n            imageUrl: user.imageUrl,\n            email: user.primaryEmailAddress?.emailAddress,\n            createdAt: user.createdAt,\n            followingCount: following.length,\n            followersCount: followers.length,\n        };\n    };\n\n    return (\n        <SocialContext.Provider\n            value={{\n                following,\n                followers,\n                activityFeed,\n                loading,\n                followUser,\n                unfollowUser,\n                isFollowing,\n                addActivity,\n                getProfile,\n            }}\n        >\n            {children}\n        </SocialContext.Provider>\n    );\n}\n\nexport function useSocial() {\n    const context = useContext(SocialContext);\n    if (!context) {\n        throw new Error(\"useSocial must be used within SocialProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AAEA,MAAM,8BAAgB,IAAA,8KAAa;AAE5B,SAAS,eAAe,EAAE,QAAQ,EAAE;;IACvC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,qLAAO;IACpC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,mBAAmB;IACnB,IAAA,0KAAS;oCAAC;YACN,MAAM;2DAAiB;oBACnB,IAAI;wBACA,IAAI,cAAc,MAAM;4BACpB,MAAM,aAAa,KAAK,cAAc,EAAE,UAAU,CAAC;4BACnD,aAAa,WAAW,SAAS,IAAI,EAAE;4BACvC,aAAa,WAAW,SAAS,IAAI,EAAE;4BACvC,gBAAgB,WAAW,YAAY,IAAI,EAAE;wBACjD,OAAO;4BACH,MAAM,QAAQ,aAAa,OAAO,CAAC;4BACnC,IAAI,OAAO;gCACP,MAAM,SAAS,KAAK,KAAK,CAAC;gCAC1B,aAAa,OAAO,SAAS,IAAI,EAAE;gCACnC,gBAAgB,OAAO,YAAY,IAAI,EAAE;4BAC7C;wBACJ;oBACJ,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,+BAA+B;oBACjD,SAAU;wBACN,WAAW;oBACf;gBACJ;;YACA;QACJ;mCAAG;QAAC;QAAM;KAAW;IAErB,mBAAmB;IACnB,MAAM,iBAAiB,OAAO;QAC1B,IAAI;YACA,IAAI,cAAc,MAAM;gBACpB,MAAM,KAAK,MAAM,CAAC;oBACd,gBAAgB;wBACZ,GAAG,KAAK,cAAc;wBACtB,QAAQ;oBACZ;gBACJ;YACJ,OAAO;gBACH,aAAa,OAAO,CAAC,cAAc,KAAK,SAAS,CAAC;YACtD;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,+BAA+B;QACjD;IACJ;IAEA,gBAAgB;IAChB,MAAM,aAAa,OAAO;QACtB,IAAI,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,WAAW,EAAE,GAAG;QAEjD,MAAM,eAAe;eAAI;YAAW;gBAChC,IAAI,WAAW,EAAE;gBACjB,UAAU,WAAW,QAAQ,IAAI,WAAW,SAAS,IAAI;gBACzD,UAAU,WAAW,QAAQ;gBAC7B,YAAY,IAAI,OAAO,WAAW;YACtC;SAAE;QAEF,aAAa;QACb,MAAM,eAAe;YAAE,WAAW;YAAc;YAAW;QAAa;QAExE,eAAe;QACf,YAAY;YACR,MAAM;YACN,YAAY,WAAW,QAAQ,IAAI,WAAW,SAAS;YACvD,cAAc,WAAW,EAAE;QAC/B;IACJ;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO;QACxB,MAAM,eAAe,UAAU,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACpD,aAAa;QACb,MAAM,eAAe;YAAE,WAAW;YAAc;YAAW;QAAa;IAC5E;IAEA,qBAAqB;IACrB,MAAM,cAAc,CAAC;QACjB,OAAO,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACxC;IAEA,eAAe;IACf,MAAM,cAAc,OAAO;QACvB,MAAM,cAAc;YAChB,IAAI,CAAC,SAAS,EAAE,KAAK,GAAG,IAAI;YAC5B,QAAQ,MAAM,MAAM;YACpB,UAAU,MAAM,YAAY,MAAM,aAAa;YAC/C,WAAW,MAAM;YACjB,WAAW,IAAI,OAAO,WAAW;YACjC,GAAG,QAAQ;QACf;QAEA,MAAM,UAAU;YAAC;eAAgB;SAAa,CAAC,KAAK,CAAC,GAAG,KAAK,eAAe;QAC5E,gBAAgB;QAChB,MAAM,eAAe;YAAE;YAAW;YAAW,cAAc;QAAQ;IACvE;IAEA,wBAAwB;IACxB,MAAM,aAAa;QACf,IAAI,CAAC,cAAc,CAAC,MAAM,OAAO;QAEjC,OAAO;YACH,IAAI,KAAK,EAAE;YACX,UAAU,KAAK,QAAQ,IAAI,KAAK,SAAS,IAAI;YAC7C,WAAW,KAAK,SAAS;YACzB,UAAU,KAAK,QAAQ;YACvB,UAAU,KAAK,QAAQ;YACvB,OAAO,KAAK,mBAAmB,EAAE;YACjC,WAAW,KAAK,SAAS;YACzB,gBAAgB,UAAU,MAAM;YAChC,gBAAgB,UAAU,MAAM;QACpC;IACJ;IAEA,qBACI,6LAAC,cAAc,QAAQ;QACnB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GAvIgB;;QACiB,qLAAO;;;KADxB;AAyIT,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 1418, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/components/Providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { WatchlistProvider } from \"@/context/WatchlistContext\";\nimport { WatchedProvider } from \"@/context/WatchedContext\";\nimport { ReviewProvider } from \"@/context/ReviewContext\";\nimport { ListsProvider } from \"@/context/ListsContext\";\nimport { SocialProvider } from \"@/context/SocialContext\";\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n    return (\n        <QueryClientProvider client={queryClient}>\n            <WatchlistProvider>\n                <WatchedProvider>\n                    <ReviewProvider>\n                        <ListsProvider>\n                            <SocialProvider>\n                                {children}\n                            </SocialProvider>\n                        </ListsProvider>\n                    </ReviewProvider>\n                </WatchedProvider>\n            </WatchlistProvider>\n        </QueryClientProvider>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACjE,qBACI,6LAAC,gNAAmB;QAAC,QAAQ,2JAAW;kBACpC,cAAA,6LAAC,2JAAiB;sBACd,cAAA,6LAAC,uJAAe;0BACZ,cAAA,6LAAC,qJAAc;8BACX,cAAA,6LAAC,mJAAa;kCACV,cAAA,6LAAC,qJAAc;sCACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjC;KAhBgB"}}]
}