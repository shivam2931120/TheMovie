{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/api/tmdb.js"],"sourcesContent":["import axios from \"axios\";\n\n// Constants\nconst TMDB_BASE_URL = \"https://api.themoviedb.org/3\";\nconst TMDB_IMAGE_BASE_URL = \"https://image.tmdb.org/t/p\";\n\n// Cached API Key\nlet cachedTmdbKey = null;\n\n// Helper to get API key (Priority: NEXT_PUBLIC, VITE, Process Env)\nconst getApiKey = () => {\n    if (typeof process !== 'undefined' && process.env) {\n        return process.env.NEXT_PUBLIC_TMDB_API_KEY || process.env.VITE_TMDB_API_KEY;\n    }\n    return null;\n}\n\n// Create Axios Instance\nconst api = axios.create({\n    baseURL: TMDB_BASE_URL,\n    timeout: 30000, // 30 second timeout\n    params: {\n        language: \"en-US\",\n    },\n});\n\n// Request Interceptor to add API Key\napi.interceptors.request.use((config) => {\n    const apiKey = getApiKey();\n    if (apiKey && apiKey !== 'your_tmdb_api_key_here') {\n        config.params = { ...config.params, api_key: apiKey };\n    }\n    return config;\n});\n\n// Robust Error Handling Wrapper\nconst fetchFromApi = async (endpoint, params = {}) => {\n    try {\n        const apiKey = getApiKey();\n        if (!apiKey || apiKey === 'your_tmdb_api_key_here') {\n            console.warn(`[TMDB] Missing API Key. Returning empty data for ${endpoint}`);\n            return { results: [], total_pages: 0, total_results: 0 };\n        }\n        const { data } = await api.get(endpoint, { params });\n        return data || { results: [], total_pages: 0, total_results: 0 };\n    } catch (error) {\n        if (error.code === 'ECONNABORTED') {\n            console.error(`[TMDB] Timeout fetching ${endpoint}`);\n        } else {\n            console.error(`[TMDB] Error fetching ${endpoint}:`, error.message);\n        }\n        return { results: [], total_pages: 0, total_results: 0 }; // Return empty structure instead of null\n    }\n};\n\n// --- API Functions ---\n\nexport const getTrendingMovies = (timeWindow = \"day\") =>\n    fetchFromApi(`/trending/movie/${timeWindow}`);\n\nexport const getPopularMovies = (page = 1) =>\n    fetchFromApi(\"/movie/popular\", { page });\n\nexport const getNowPlayingMovies = (page = 1) =>\n    fetchFromApi(\"/movie/now_playing\", { page });\n\nexport const getUpcomingMovies = (page = 1) =>\n    fetchFromApi(\"/movie/upcoming\", { page });\n\nexport const getTopRatedMovies = (page = 1) =>\n    fetchFromApi(\"/movie/top_rated\", { page });\n\nexport const getMovieDetails = (id) =>\n    fetchFromApi(`/movie/${id}`, { append_to_response: \"videos,credits,similar,images,reviews,keywords,alternative_titles,release_dates\" });\n\nexport const searchMovies = (query, page = 1) =>\n    fetchFromApi(\"/search/movie\", { query, page });\n\nexport const getMovieGenres = () =>\n    fetchFromApi(\"/genre/movie/list\");\n\nexport const getDiscoverMovies = (filters = {}, page = 1) =>\n    fetchFromApi(\"/discover/movie\", { ...filters, page });\n\nexport const getDiscoverTV = (filters = {}, page = 1) =>\n    fetchFromApi(\"/discover/tv\", { ...filters, page });\n\nexport const getTVDetails = (id) =>\n    fetchFromApi(`/tv/${id}`, { append_to_response: \"videos,credits,similar,images,reviews,keywords,alternative_titles,content_ratings,aggregate_credits\" });\n\nexport const getWatchProviders = (id, type = 'movie') =>\n    fetchFromApi(`/${type}/${id}/watch/providers`);\n\nexport const getTVGenres = () =>\n    fetchFromApi(\"/genre/tv/list\");\n\nexport const getTrendingTV = (timeWindow = \"day\") =>\n    fetchFromApi(`/trending/tv/${timeWindow}`);\n\nexport const getPopularTV = (page = 1) =>\n    fetchFromApi(\"/tv/popular\", { page });\n\nexport const getTopRatedTV = (page = 1) =>\n    fetchFromApi(\"/tv/top_rated\", { page });\n\nexport const getPersonDetails = (id) =>\n    fetchFromApi(`/person/${id}`, { append_to_response: \"movie_credits,tv_credits,images\" });\n\nexport const getMovieRecommendations = (id, page = 1) =>\n    fetchFromApi(`/movie/${id}/recommendations`, { page });\n\nexport const getTVRecommendations = (id, page = 1) =>\n    fetchFromApi(`/tv/${id}/recommendations`, { page });\n\nexport const getMovieVideos = (id) =>\n    fetchFromApi(`/movie/${id}/videos`);\n\nexport const getTVVideos = (id) =>\n    fetchFromApi(`/tv/${id}/videos`);\n\nexport const getMovieKeywords = (id) =>\n    fetchFromApi(`/movie/${id}/keywords`);\n\nexport const getTVKeywords = (id) =>\n    fetchFromApi(`/tv/${id}/keywords`);\n\nexport const getMovieReviews = (id, page = 1) =>\n    fetchFromApi(`/movie/${id}/reviews`, { page });\n\nexport const getTVReviews = (id, page = 1) =>\n    fetchFromApi(`/tv/${id}/reviews`, { page });\n\nexport const getCollection = (id) =>\n    fetchFromApi(`/collection/${id}`);\n\nexport const getTVSeasonDetails = (tvId, seasonNumber) =>\n    fetchFromApi(`/tv/${tvId}/season/${seasonNumber}`);\n\nexport const getTVEpisodeDetails = (tvId, seasonNumber, episodeNumber) =>\n    fetchFromApi(`/tv/${tvId}/season/${seasonNumber}/episode/${episodeNumber}`);\n\nexport const getMovieAlternativeTitles = (id) =>\n    fetchFromApi(`/movie/${id}/alternative_titles`);\n\nexport const getTVAlternativeTitles = (id) =>\n    fetchFromApi(`/tv/${id}/alternative_titles`);\n\nexport const getMovieCertifications = (id) =>\n    fetchFromApi(`/movie/${id}/release_dates`);\n\nexport const getTVContentRatings = (id) =>\n    fetchFromApi(`/tv/${id}/content_ratings`);\n\nexport const getPersonMovieCredits = (id) =>\n    fetchFromApi(`/person/${id}/movie_credits`);\n\nexport const getPersonTVCredits = (id) =>\n    fetchFromApi(`/person/${id}/tv_credits`);\n\nexport const getPersonCombinedCredits = (id) =>\n    fetchFromApi(`/person/${id}/combined_credits`);\n\nexport const getPersonExternalIds = (id) =>\n    fetchFromApi(`/person/${id}/external_ids`);\n\n// Helper to get image URL\nexport const getImageUrl = (path, size = \"original\") => {\n    if (!path) return null;\n    return `${TMDB_IMAGE_BASE_URL}/${size}${path}`;\n};\n\n// Helper to get backdrop URL\nexport const getBackdropUrl = (path) => getImageUrl(path, \"original\");\n\n// Helper to get poster URL\nexport const getPosterUrl = (path, size = \"w500\") => getImageUrl(path, size);\n\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { Search, User, X, Home } from \"lucide-react\";\nimport { SignedIn, SignedOut } from \"@clerk/nextjs\";\nimport clsx from \"clsx\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { searchMovies } from \"@/api/tmdb\";\n\n// NAV_LINKS removed\n\n\nexport function Navbar() {\n    const [isScrolled, setIsScrolled] = useState(false);\n    const [showSearch, setShowSearch] = useState(false);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [suggestions, setSuggestions] = useState<any[]>([]);\n    const [hideNavbar, setHideNavbar] = useState(false);\n    const wrapperRef = useRef<HTMLDivElement>(null);\n    const lastScrollY = useRef(0);\n\n    const pathname = usePathname();\n    const router = useRouter();\n\n    // Check if we're on a detail page\n    const isDetailPage = pathname?.startsWith(\"/movie/\") || pathname?.startsWith(\"/tv/\");\n\n    useEffect(() => {\n        const handleScroll = () => {\n            const currentScrollY = window.scrollY;\n\n            if (isDetailPage) {\n                // On detail pages: hide navbar at top, show when scrolling\n                if (currentScrollY < 100) {\n                    setHideNavbar(true);\n                    setIsScrolled(false);\n                } else {\n                    setHideNavbar(false);\n                    setIsScrolled(true);\n                }\n            } else {\n                // On other pages: normal behavior\n                setHideNavbar(false);\n                setIsScrolled(currentScrollY > 0);\n            }\n\n            lastScrollY.current = currentScrollY;\n        };\n\n        handleScroll(); // Run on mount\n        window.addEventListener(\"scroll\", handleScroll);\n        return () => window.removeEventListener(\"scroll\", handleScroll);\n    }, [isDetailPage]);\n\n    // Fetch suggestions when query changes\n    useEffect(() => {\n        const fetchSuggestions = async () => {\n            if (searchQuery.length > 2) {\n                const data = await searchMovies(searchQuery);\n                if (data?.results) {\n                    setSuggestions(data.results.slice(0, 5));\n                }\n            } else {\n                setSuggestions([]);\n            }\n        };\n\n        const timeoutId = setTimeout(fetchSuggestions, 300); // Debounce\n        return () => clearTimeout(timeoutId);\n    }, [searchQuery]);\n\n    // Close on click outside\n    useEffect(() => {\n        function handleClickOutside(event: MouseEvent) {\n            if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {\n                setSuggestions([]);\n            }\n        }\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n    }, [wrapperRef]);\n\n    const handleSearchCheck = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (searchQuery.trim()) {\n            router.push(`/search?q=${encodeURIComponent(searchQuery)}`);\n            setShowSearch(false);\n            setSuggestions([]);\n        }\n    };\n\n    return (\n        <nav\n            className={clsx(\n                \"fixed left-0 right-0 z-40 transition-all duration-500\",\n                hideNavbar ? \"-top-32\" : \"top-0\",\n                isScrolled\n                    ? \"bg-black/95 backdrop-blur-2xl shadow-2xl shadow-black/50\"\n                    : \"bg-gradient-to-b from-black via-black/80 to-transparent\"\n            )}\n        >\n            {/* Main Navbar */}\n            <div className=\"border-b border-white/10\">\n                <div className=\"container mx-auto px-4 sm:px-6 lg:px-20\">\n                    <div className=\"flex items-center justify-between h-16 sm:h-20\">\n                        {/* Logo */}\n                        <Link href=\"/\" className=\"flex items-center gap-3 relative z-50 group\">\n                            <div className=\"relative\">\n                                <Image\n                                    src=\"/movie.png\"\n                                    alt=\"TheMovie Logo\"\n                                    width={48}\n                                    height={48}\n                                    className=\"w-10 h-10 sm:w-12 sm:h-12 object-contain transition-transform group-hover:scale-110\"\n                                />\n                                <div className=\"absolute inset-0 bg-accent-primary/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity\" />\n                            </div>\n                            <span className=\"font-display font-bold text-xl sm:text-3xl tracking-tight text-white\">\n                                The<span className=\"text-accent-primary\">Movie</span>\n                            </span>\n                        </Link>\n\n                        {/* Actions */}\n                        <div className=\"flex items-center gap-3\">\n                            {/* Home Button */}\n                            <Link href=\"/\">\n                                <button className=\"p-2.5 rounded-full bg-white/5 text-text-secondary hover:text-white hover:bg-white/10 transition-all\" aria-label=\"Home\">\n                                    <Home size={20} />\n                                </button>\n                            </Link>\n\n                            {/* Search Bar */}\n                            <div ref={wrapperRef} className=\"relative flex items-center\">\n                                <AnimatePresence>\n                                    {showSearch && (\n                                        <motion.form\n                                            initial={{ width: 0, opacity: 0 }}\n                                            animate={{ width: window.innerWidth < 640 ? 200 : 280, opacity: 1 }}\n                                            exit={{ width: 0, opacity: 0 }}\n                                            onSubmit={handleSearchCheck}\n                                            className=\"overflow-visible mr-2 relative\"\n                                        >\n                                            <input\n                                                type=\"text\"\n                                                placeholder=\"Search movies, shows...\"\n                                                className=\"w-full bg-white/10 border border-white/20 rounded-full px-4 py-2 text-sm text-white placeholder:text-text-muted focus:outline-none focus:border-accent-primary focus:bg-white/15 transition-all\"\n                                                autoFocus\n                                                value={searchQuery}\n                                                onChange={(e) => setSearchQuery(e.target.value)}\n                                            />\n                                            {/* Suggestions Dropdown */}\n                                            {suggestions.length > 0 && (\n                                                <motion.div\n                                                    initial={{ opacity: 0, y: -10 }}\n                                                    animate={{ opacity: 1, y: 0 }}\n                                                    className=\"absolute top-full text-start left-0 sm:left-auto sm:right-0 w-[90vw] sm:w-96 mt-2 bg-bg-card/95 backdrop-blur-xl border border-white/20 rounded-2xl overflow-hidden shadow-2xl z-50 max-h-[60vh] overflow-y-auto\"\n                                                >\n                                                    {suggestions.map((movie) => (\n                                                        <Link\n                                                            key={movie.id}\n                                                            href={`/movie/${movie.id}`}\n                                                            onClick={() => {\n                                                                setShowSearch(false);\n                                                                setSuggestions([]);\n                                                                setSearchQuery(\"\");\n                                                            }}\n                                                            className=\"flex items-start gap-3 sm:gap-4 p-3 sm:p-4 hover:bg-white/10 transition-all border-b border-white/5 last:border-0 group\"\n                                                        >\n                                                            <div className=\"w-12 h-16 sm:w-14 sm:h-20 relative bg-neutral-800 rounded-lg overflow-hidden shrink-0 ring-2 ring-white/0 group-hover:ring-white/20 transition-all\">\n                                                                {movie.poster_path && (\n                                                                    <Image\n                                                                        src={`https://image.tmdb.org/t/p/w92${movie.poster_path}`}\n                                                                        alt={movie.title}\n                                                                        fill\n                                                                        className=\"object-cover\"\n                                                                    />\n                                                                )}\n                                                            </div>\n                                                            <div className=\"flex-1 min-w-0\">\n                                                                <p className=\"text-sm font-bold text-white leading-tight mb-1 line-clamp-2 group-hover:text-accent-primary transition-colors\">{movie.title}</p>\n                                                                <p className=\"text-xs text-text-muted\">{movie.release_date?.split(\"-\")[0]}</p>\n                                                                <div className=\"flex items-center gap-2 mt-1\">\n                                                                    <span className=\"text-xs text-yellow-500\">â˜… {movie.vote_average?.toFixed(1)}</span>\n                                                                </div>\n                                                            </div>\n                                                        </Link>\n                                                    ))}\n                                                </motion.div>\n                                            )}\n                                        </motion.form>\n                                    )}\n                                </AnimatePresence>\n                                <button\n                                    onClick={() => setShowSearch(!showSearch)}\n                                    className={clsx(\n                                        \"p-2.5 rounded-full transition-all\",\n                                        showSearch\n                                            ? \"bg-accent-primary text-white\"\n                                            : \"bg-white/5 text-text-secondary hover:text-white hover:bg-white/10\"\n                                    )}\n                                >\n                                    {showSearch ? <X size={20} /> : <Search size={20} />}\n                                </button>\n                            </div>\n\n                            <SignedIn>\n                                <Link href=\"/profile\">\n                                    <button className=\"p-2.5 rounded-full bg-white/5 text-text-secondary hover:text-white hover:bg-white/10 transition-all\">\n                                        <User size={20} />\n                                    </button>\n                                </Link>\n                            </SignedIn>\n                            <SignedOut>\n                                <Link href=\"/sign-in\">\n                                    <button className=\"px-4 py-2 rounded-full bg-accent-primary hover:bg-accent-primary/90 text-white text-sm font-bold transition-all shadow-lg shadow-accent-primary/20\">\n                                        Sign In\n                                    </button>\n                                </Link>\n                            </SignedOut>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </nav>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 766, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/lib/queryClient.ts"],"sourcesContent":["import { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\n\n// Create a client with optimal settings\nexport const queryClient = new QueryClient({\n    defaultOptions: {\n        queries: {\n            staleTime: 1000 * 60 * 5, // 5 minutes\n            gcTime: 1000 * 60 * 30, // 30 minutes (previously cacheTime)\n            refetchOnWindowFocus: false,\n            retry: 2,\n            retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n        },\n    },\n});\n\nexport { QueryClientProvider };\n\n// Query keys for caching\nexport const queryKeys = {\n    movies: {\n        all: [\"movies\"],\n        popular: (page: number) => [\"movies\", \"popular\", page],\n        trending: (timeWindow: string, page: number) => [\"movies\", \"trending\", timeWindow, page],\n        nowPlaying: (page: number) => [\"movies\", \"nowPlaying\", page],\n        upcoming: (page: number) => [\"movies\", \"upcoming\", page],\n        topRated: (page: number) => [\"movies\", \"topRated\", page],\n        search: (query: string, page: number) => [\"movies\", \"search\", query, page],\n        discover: (filters: any) => [\"movies\", \"discover\", filters],\n        details: (id: string | number) => [\"movies\", \"details\", id],\n        similar: (id: string | number, page: number) => [\"movies\", \"similar\", id, page],\n        reviews: (id: string | number, page: number) => [\"movies\", \"reviews\", id, page],\n        trailer: (id: string | number) => [\"movies\", \"trailer\", id],\n    },\n    collections: {\n        all: [\"collections\"],\n        details: (id: number | string) => [\"collections\", id],\n    },\n    genres: [\"genres\"],\n    era: (era: string, page: number) => [\"era\", era, page],\n    awards: (category: string, page: number) => [\"awards\", category, page],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,MAAM,cAAc,IAAI,4LAAW,CAAC;IACvC,gBAAgB;QACZ,SAAS;YACL,WAAW,OAAO,KAAK;YACvB,QAAQ,OAAO,KAAK;YACpB,sBAAsB;YACtB,OAAO;YACP,YAAY,CAAC,eAAiB,KAAK,GAAG,CAAC,OAAO,KAAK,cAAc;QACrE;IACJ;AACJ;;AAKO,MAAM,YAAY;IACrB,QAAQ;QACJ,KAAK;YAAC;SAAS;QACf,SAAS,CAAC,OAAiB;gBAAC;gBAAU;gBAAW;aAAK;QACtD,UAAU,CAAC,YAAoB,OAAiB;gBAAC;gBAAU;gBAAY;gBAAY;aAAK;QACxF,YAAY,CAAC,OAAiB;gBAAC;gBAAU;gBAAc;aAAK;QAC5D,UAAU,CAAC,OAAiB;gBAAC;gBAAU;gBAAY;aAAK;QACxD,UAAU,CAAC,OAAiB;gBAAC;gBAAU;gBAAY;aAAK;QACxD,QAAQ,CAAC,OAAe,OAAiB;gBAAC;gBAAU;gBAAU;gBAAO;aAAK;QAC1E,UAAU,CAAC,UAAiB;gBAAC;gBAAU;gBAAY;aAAQ;QAC3D,SAAS,CAAC,KAAwB;gBAAC;gBAAU;gBAAW;aAAG;QAC3D,SAAS,CAAC,IAAqB,OAAiB;gBAAC;gBAAU;gBAAW;gBAAI;aAAK;QAC/E,SAAS,CAAC,IAAqB,OAAiB;gBAAC;gBAAU;gBAAW;gBAAI;aAAK;QAC/E,SAAS,CAAC,KAAwB;gBAAC;gBAAU;gBAAW;aAAG;IAC/D;IACA,aAAa;QACT,KAAK;YAAC;SAAc;QACpB,SAAS,CAAC,KAAwB;gBAAC;gBAAe;aAAG;IACzD;IACA,QAAQ;QAAC;KAAS;IAClB,KAAK,CAAC,KAAa,OAAiB;YAAC;YAAO;YAAK;SAAK;IACtD,QAAQ,CAAC,UAAkB,OAAiB;YAAC;YAAU;YAAU;SAAK;AAC1E"}},
    {"offset": {"line": 879, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/watchlist-context.js"],"sourcesContent":["import { createContext, useContext } from \"react\";\n\nexport const WatchlistContext = createContext(null);\n\nexport function useWatchlist() {\n  const ctx = useContext(WatchlistContext);\n  if (!ctx) {\n    return {\n      items: [],\n      movies: [],\n      tvShows: [],\n      count: 0,\n      add: () => console.warn('Watchlist context not available'),\n      remove: () => console.warn('Watchlist context not available'),\n      toggle: () => console.warn('Watchlist context not available'),\n      has: () => false,\n    };\n  }\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,iCAAmB,IAAA,sNAAa,EAAC;AAEvC,SAAS;IACd,MAAM,MAAM,IAAA,mNAAU,EAAC;IACvB,IAAI,CAAC,KAAK;QACR,OAAO;YACL,OAAO,EAAE;YACT,QAAQ,EAAE;YACV,SAAS,EAAE;YACX,OAAO;YACP,KAAK,IAAM,QAAQ,IAAI,CAAC;YACxB,QAAQ,IAAM,QAAQ,IAAI,CAAC;YAC3B,QAAQ,IAAM,QAAQ,IAAI,CAAC;YAC3B,KAAK,IAAM;QACb;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 908, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/WatchlistContext.jsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\nimport { WatchlistContext } from \"./watchlist-context\";\n\nconst STORAGE_KEY = \"movie_catalogue_watchlist_v1\";\n\nexport function WatchlistProvider({ children }) {\n  const { user, isSignedIn, isLoaded } = useUser();\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    if (isSignedIn && user) {\n      const userWatchlist = user.unsafeMetadata?.watchlist || [];\n      const migratedItems = userWatchlist.map(item => {\n        if (item.type) return item; // Already has type\n        const isTv = (item.name && !item.title) || item.image?.medium || item.premiered;\n        return { ...item, type: isTv ? 'tv' : 'movie' };\n      });\n      console.log('Loaded watchlist items (migrated):', migratedItems); // Debug\n      setItems(migratedItems);\n    } else {\n      try {\n        const raw = localStorage.getItem(STORAGE_KEY);\n        const storedItems = raw ? JSON.parse(raw) : [];\n        const migratedItems = storedItems.map(item => {\n          if (item.type) return item; // Already has type\n          const isTv = (item.name && !item.title) || item.image?.medium || item.premiered;\n          return { ...item, type: isTv ? 'tv' : 'movie' };\n        });\n        console.log('Loaded watchlist items from localStorage (migrated):', migratedItems); // Debug\n        setItems(migratedItems);\n      } catch {\n        setItems([]);\n      }\n    }\n  }, [isSignedIn, user, isLoaded]);\n\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    if (isSignedIn && user) {\n      user.update({\n        unsafeMetadata: {\n          ...user.unsafeMetadata,\n          watchlist: items\n        }\n      }).catch(err => {\n        console.error(\"Failed to save watchlist:\", err);\n        // Fallback to localStorage on Clerk API errors (e.g., 429 rate limit)\n        try {\n          localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n        } catch (e) {\n          console.error(\"Failed to save to localStorage:\", e);\n        }\n      });\n    } else {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n      } catch {\n      }\n    }\n  }, [items, isSignedIn, user, isLoaded]);\n\n  const add = useCallback((item) => {\n    // Minify for 8KB limit\n    const minItem = {\n      id: item.id,\n      title: item.title || item.name,\n      poster_path: item.poster_path,\n      vote_average: item.vote_average,\n      release_date: item.release_date || item.first_air_date,\n      type: item.type || (item.name ? 'tv' : 'movie')\n    };\n    setItems((prev) => (prev.find((m) => m.id === item.id && m.type === minItem.type) ? prev : [minItem, ...prev]));\n  }, []);\n\n  const remove = useCallback((id, type = 'movie') => setItems((prev) => prev.filter((m) => !(m.id === id && m.type === type))), []);\n\n  const toggle = useCallback((item) => {\n    // Minify for 8KB limit\n    const minItem = {\n      id: item.id,\n      title: item.title || item.name,\n      poster_path: item.poster_path,\n      vote_average: item.vote_average,\n      release_date: item.release_date || item.first_air_date,\n      type: item.type || (item.name ? 'tv' : 'movie')\n    };\n    setItems((prev) => (\n      prev.find((m) => m.id === item.id && m.type === minItem.type)\n        ? prev.filter((m) => !(m.id === item.id && m.type === minItem.type))\n        : [minItem, ...prev]\n    ));\n  }, []);\n\n  const has = useCallback((id, type = 'movie') => items.some((m) => m.id === id && m.type === type), [items]);\n\n  const movies = useMemo(() => items.filter(i => i.type === 'movie' || !i.type), [items]);\n  const tvShows = useMemo(() => items.filter(i => i.type === 'tv'), [items]);\n\n  const value = useMemo(() => ({\n    items,\n    movies,\n    tvShows,\n    add,\n    remove,\n    toggle,\n    has,\n    count: items.length\n  }), [items, movies, tvShows, add, remove, toggle, has]);\n  return <WatchlistContext.Provider value={value}>{children}</WatchlistContext.Provider>;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1061, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/WatchedContext.jsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useState, useEffect, useCallback, useMemo } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nexport const WatchedContext = createContext();\n\nconst STORAGE_KEY = \"movie_catalogue_watched_v1\";\n\nexport function WatchedProvider({ children }) {\n  const { user, isSignedIn, isLoaded } = useUser();\n  const [watched, setWatched] = useState([]);\n\n  // Load\n  useEffect(() => {\n    if (!isLoaded) return;\n\n    if (isSignedIn && user) {\n      const userWatched = user.unsafeMetadata?.watched || [];\n      setWatched(userWatched);\n    } else {\n      try {\n        const raw = localStorage.getItem(STORAGE_KEY);\n        setWatched(raw ? JSON.parse(raw) : []);\n      } catch {\n        setWatched([]);\n      }\n    }\n  }, [isSignedIn, user, isLoaded]);\n\n  // Save\n  useEffect(() => {\n    if (!isLoaded) return;\n    if (isSignedIn && user) {\n      user.update({\n        unsafeMetadata: {\n          ...user.unsafeMetadata,\n          watched: watched\n        }\n      }).catch(err => {\n        console.error(\"Failed to save watched:\", err);\n        // Fallback to localStorage on Clerk API errors (e.g., 429 rate limit)\n        try {\n          localStorage.setItem(STORAGE_KEY, JSON.stringify(watched));\n        } catch (e) {\n          console.error(\"Failed to save to localStorage:\", e);\n        }\n      });\n    } else {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(watched));\n    }\n  }, [watched, isSignedIn, user, isLoaded]);\n\n  const addWatched = useCallback((item) => {\n    // Minify the item to save space (Clerk has 8k limit)\n    const minItem = {\n      id: item.id,\n      title: item.title || item.name,\n      poster_path: item.poster_path,\n      vote_average: item.vote_average,\n      release_date: item.release_date || item.first_air_date,\n      type: item.name ? 'tv' : 'movie'\n    };\n    setWatched((prev) => (prev.find((m) => m.id === item.id) ? prev : [minItem, ...prev]));\n  }, []);\n\n  const removeWatched = useCallback((id) => setWatched((prev) => prev.filter((m) => m.id !== id)), []);\n\n  const hasWatched = useCallback((id) => watched.some((m) => m.id === id), [watched]);\n\n  const value = useMemo(() => ({ watched, addWatched, removeWatched, hasWatched }), [watched, addWatched, removeWatched, hasWatched]);\n\n  return <WatchedContext.Provider value={value}>{children}</WatchedContext.Provider>;\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKO,MAAM,+BAAiB,IAAA,sNAAa;AAE3C,MAAM,cAAc;AAEb,SAAS,gBAAgB,EAAE,QAAQ,EAAE;IAC1C,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG,IAAA,kLAAO;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAEzC,OAAO;IACP,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,UAAU;QAEf,IAAI,cAAc,MAAM;YACtB,MAAM,cAAc,KAAK,cAAc,EAAE,WAAW,EAAE;YACtD,WAAW;QACb,OAAO;YACL,IAAI;gBACF,MAAM,MAAM,aAAa,OAAO,CAAC;gBACjC,WAAW,MAAM,KAAK,KAAK,CAAC,OAAO,EAAE;YACvC,EAAE,OAAM;gBACN,WAAW,EAAE;YACf;QACF;IACF,GAAG;QAAC;QAAY;QAAM;KAAS;IAE/B,OAAO;IACP,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,UAAU;QACf,IAAI,cAAc,MAAM;YACtB,KAAK,MAAM,CAAC;gBACV,gBAAgB;oBACd,GAAG,KAAK,cAAc;oBACtB,SAAS;gBACX;YACF,GAAG,KAAK,CAAC,CAAA;gBACP,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,sEAAsE;gBACtE,IAAI;oBACF,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;gBACnD,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,mCAAmC;gBACnD;YACF;QACF,OAAO;YACL,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACnD;IACF,GAAG;QAAC;QAAS;QAAY;QAAM;KAAS;IAExC,MAAM,aAAa,IAAA,oNAAW,EAAC,CAAC;QAC9B,qDAAqD;QACrD,MAAM,UAAU;YACd,IAAI,KAAK,EAAE;YACX,OAAO,KAAK,KAAK,IAAI,KAAK,IAAI;YAC9B,aAAa,KAAK,WAAW;YAC7B,cAAc,KAAK,YAAY;YAC/B,cAAc,KAAK,YAAY,IAAI,KAAK,cAAc;YACtD,MAAM,KAAK,IAAI,GAAG,OAAO;QAC3B;QACA,WAAW,CAAC,OAAU,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE,IAAI,OAAO;gBAAC;mBAAY;aAAK;IACtF,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,oNAAW,EAAC,CAAC,KAAO,WAAW,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM,EAAE;IAEnG,MAAM,aAAa,IAAA,oNAAW,EAAC,CAAC,KAAO,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK;QAAC;KAAQ;IAElF,MAAM,QAAQ,IAAA,gNAAO,EAAC,IAAM,CAAC;YAAE;YAAS;YAAY;YAAe;QAAW,CAAC,GAAG;QAAC;QAAS;QAAY;QAAe;KAAW;IAElI,qBAAO,8OAAC,eAAe,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AACjD"}},
    {"offset": {"line": 1168, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/ReviewContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nconst ReviewContext = createContext();\n\nexport function ReviewProvider({ children }) {\n    const { user, isSignedIn } = useUser();\n    const [reviews, setReviews] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    // Load reviews from user metadata or localStorage\n    useEffect(() => {\n        const loadReviews = async () => {\n            try {\n                if (isSignedIn && user) {\n                    const savedReviews = user.unsafeMetadata?.reviews;\n                    if (savedReviews) {\n                        setReviews(savedReviews);\n                    }\n                } else {\n                    const localReviews = localStorage.getItem(\"userReviews\");\n                    if (localReviews) {\n                        setReviews(JSON.parse(localReviews));\n                    }\n                }\n            } catch (error) {\n                console.error(\"Failed to load reviews:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadReviews();\n    }, [user, isSignedIn]);\n\n    // Save reviews\n    const saveReviews = async (newReviews) => {\n        try {\n            if (isSignedIn && user) {\n                await user.update({\n                    unsafeMetadata: {\n                        ...user.unsafeMetadata,\n                        reviews: newReviews,\n                    },\n                });\n            } else {\n                localStorage.setItem(\"userReviews\", JSON.stringify(newReviews));\n            }\n        } catch (error) {\n            console.error(\"Failed to save reviews:\", error);\n        }\n    };\n\n    // Add a review\n    const addReview = async (movieId, movieTitle, poster, rating, content) => {\n        const newReview = {\n            id: `${movieId}-${Date.now()}`,\n            movieId,\n            movieTitle,\n            poster,\n            rating,\n            content,\n            createdAt: new Date().toISOString(),\n        };\n\n        const updatedReviews = [newReview, ...reviews];\n        setReviews(updatedReviews);\n        await saveReviews(updatedReviews);\n        return newReview;\n    };\n\n    // Update a review\n    const updateReview = async (reviewId, updates) => {\n        const updatedReviews = reviews.map((r) =>\n            r.id === reviewId ? { ...r, ...updates, updatedAt: new Date().toISOString() } : r\n        );\n        setReviews(updatedReviews);\n        await saveReviews(updatedReviews);\n    };\n\n    // Delete a review\n    const deleteReview = async (reviewId) => {\n        const updatedReviews = reviews.filter((r) => r.id !== reviewId);\n        setReviews(updatedReviews);\n        await saveReviews(updatedReviews);\n    };\n\n    // Get review for a specific movie\n    const getReviewForMovie = (movieId) => {\n        return reviews.find((r) => r.movieId === String(movieId));\n    };\n\n    // Get average rating\n    const getAverageRating = () => {\n        if (reviews.length === 0) return 0;\n        const sum = reviews.reduce((acc, r) => acc + (r.rating || 0), 0);\n        return sum / reviews.length;\n    };\n\n    return (\n        <ReviewContext.Provider\n            value={{\n                reviews,\n                loading,\n                addReview,\n                updateReview,\n                deleteReview,\n                getReviewForMovie,\n                getAverageRating,\n            }}\n        >\n            {children}\n        </ReviewContext.Provider>\n    );\n}\n\nexport function useReviews() {\n    const context = useContext(ReviewContext);\n    if (!context) {\n        return {\n            reviews: [],\n            loading: false,\n            addReview: async () => {},\n            updateReview: async () => {},\n            deleteReview: async () => {},\n            getReviewForMovie: () => null,\n            getAverageRating: () => 0,\n        };\n    }\n    return context;\n}\n\nexport { ReviewContext };\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,8BAAgB,IAAA,sNAAa;AAE5B,SAAS,eAAe,EAAE,QAAQ,EAAE;IACvC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,kLAAO;IACpC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,kDAAkD;IAClD,IAAA,kNAAS,EAAC;QACN,MAAM,cAAc;YAChB,IAAI;gBACA,IAAI,cAAc,MAAM;oBACpB,MAAM,eAAe,KAAK,cAAc,EAAE;oBAC1C,IAAI,cAAc;wBACd,WAAW;oBACf;gBACJ,OAAO;oBACH,MAAM,eAAe,aAAa,OAAO,CAAC;oBAC1C,IAAI,cAAc;wBACd,WAAW,KAAK,KAAK,CAAC;oBAC1B;gBACJ;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,2BAA2B;YAC7C,SAAU;gBACN,WAAW;YACf;QACJ;QACA;IACJ,GAAG;QAAC;QAAM;KAAW;IAErB,eAAe;IACf,MAAM,cAAc,OAAO;QACvB,IAAI;YACA,IAAI,cAAc,MAAM;gBACpB,MAAM,KAAK,MAAM,CAAC;oBACd,gBAAgB;wBACZ,GAAG,KAAK,cAAc;wBACtB,SAAS;oBACb;gBACJ;YACJ,OAAO;gBACH,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;YACvD;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC7C;IACJ;IAEA,eAAe;IACf,MAAM,YAAY,OAAO,SAAS,YAAY,QAAQ,QAAQ;QAC1D,MAAM,YAAY;YACd,IAAI,GAAG,QAAQ,CAAC,EAAE,KAAK,GAAG,IAAI;YAC9B;YACA;YACA;YACA;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACrC;QAEA,MAAM,iBAAiB;YAAC;eAAc;SAAQ;QAC9C,WAAW;QACX,MAAM,YAAY;QAClB,OAAO;IACX;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO,UAAU;QAClC,MAAM,iBAAiB,QAAQ,GAAG,CAAC,CAAC,IAChC,EAAE,EAAE,KAAK,WAAW;gBAAE,GAAG,CAAC;gBAAE,GAAG,OAAO;gBAAE,WAAW,IAAI,OAAO,WAAW;YAAG,IAAI;QAEpF,WAAW;QACX,MAAM,YAAY;IACtB;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO;QACxB,MAAM,iBAAiB,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACtD,WAAW;QACX,MAAM,YAAY;IACtB;IAEA,kCAAkC;IAClC,MAAM,oBAAoB,CAAC;QACvB,OAAO,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,OAAO;IACpD;IAEA,qBAAqB;IACrB,MAAM,mBAAmB;QACrB,IAAI,QAAQ,MAAM,KAAK,GAAG,OAAO;QACjC,MAAM,MAAM,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,MAAM,IAAI,CAAC,GAAG;QAC9D,OAAO,MAAM,QAAQ,MAAM;IAC/B;IAEA,qBACI,8OAAC,cAAc,QAAQ;QACnB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,OAAO;YACH,SAAS,EAAE;YACX,SAAS;YACT,WAAW,WAAa;YACxB,cAAc,WAAa;YAC3B,cAAc,WAAa;YAC3B,mBAAmB,IAAM;YACzB,kBAAkB,IAAM;QAC5B;IACJ;IACA,OAAO;AACX"}},
    {"offset": {"line": 1312, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/ListsContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\nimport { Heart, RotateCcw, List } from \"lucide-react\";\n\nconst ListsContext = createContext();\n\n// Default pre-made lists\nconst DEFAULT_LISTS = [\n    { id: \"favorites\", name: \"My Favorites\", icon: \"Heart\", isDefault: true, movies: [] },\n    { id: \"to-rewatch\", name: \"Want to Rewatch\", icon: \"RotateCcw\", isDefault: true, movies: [] },\n];\n\nexport function ListsProvider({ children }) {\n    const { user, isSignedIn } = useUser();\n    const [lists, setLists] = useState(DEFAULT_LISTS);\n    const [loading, setLoading] = useState(true);\n\n    // Load lists from user metadata or localStorage\n    useEffect(() => {\n        const loadLists = async () => {\n            try {\n                if (isSignedIn && user) {\n                    const savedLists = user.unsafeMetadata?.customLists;\n                    if (savedLists && savedLists.length > 0) {\n                        setLists(savedLists);\n                    }\n                } else {\n                    const localLists = localStorage.getItem(\"customLists\");\n                    if (localLists) {\n                        setLists(JSON.parse(localLists));\n                    }\n                }\n            } catch (error) {\n                console.error(\"Failed to load lists:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadLists();\n    }, [user, isSignedIn]);\n\n    // Save lists\n    const saveLists = async (newLists) => {\n        try {\n            if (isSignedIn && user) {\n                await user.update({\n                    unsafeMetadata: {\n                        ...user.unsafeMetadata,\n                        customLists: newLists,\n                    },\n                });\n            } else {\n                localStorage.setItem(\"customLists\", JSON.stringify(newLists));\n            }\n        } catch (error) {\n            console.error(\"Failed to save lists:\", error);\n        }\n    };\n\n    // Create a new list\n    const createList = async (name, icon = \"List\") => {\n        const newList = {\n            id: `list-${Date.now()}`,\n            name,\n            icon,\n            isDefault: false,\n            movies: [],\n            createdAt: new Date().toISOString(),\n            isPublic: false,\n        };\n\n        const updatedLists = [...lists, newList];\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n        return newList;\n    };\n\n    // Delete a list\n    const deleteList = async (listId) => {\n        const list = lists.find((l) => l.id === listId);\n        if (list?.isDefault) return; // Can't delete default lists\n\n        const updatedLists = lists.filter((l) => l.id !== listId);\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Rename a list\n    const renameList = async (listId, newName) => {\n        const updatedLists = lists.map((l) =>\n            l.id === listId ? { ...l, name: newName } : l\n        );\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Toggle list public/private\n    const toggleListPublic = async (listId) => {\n        const updatedLists = lists.map((l) =>\n            l.id === listId ? { ...l, isPublic: !l.isPublic } : l\n        );\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Add movie to list\n    const addToList = async (listId, movie) => {\n        const updatedLists = lists.map((l) => {\n            if (l.id !== listId) return l;\n            if (l.movies.some((m) => m.id === movie.id)) return l;\n            return { ...l, movies: [...l.movies, movie] };\n        });\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Remove movie from list\n    const removeFromList = async (listId, movieId) => {\n        const updatedLists = lists.map((l) => {\n            if (l.id !== listId) return l;\n            return { ...l, movies: l.movies.filter((m) => m.id !== movieId) };\n        });\n        setLists(updatedLists);\n        await saveLists(updatedLists);\n    };\n\n    // Check if movie is in list\n    const isInList = (listId, movieId) => {\n        const list = lists.find((l) => l.id === listId);\n        return list?.movies.some((m) => m.id === movieId) || false;\n    };\n\n    // Get share link for public list\n    const getShareLink = (listId) => {\n        const list = lists.find((l) => l.id === listId);\n        if (!list?.isPublic) return null;\n        // This would need backend support for real sharing\n        // For now, create a shareable data URL\n        const data = btoa(JSON.stringify({ name: list.name, movies: list.movies.map(m => m.id) }));\n        return `${window.location.origin}/shared-list/${data}`;\n    };\n\n    return (\n        <ListsContext.Provider\n            value={{\n                lists,\n                loading,\n                createList,\n                deleteList,\n                renameList,\n                toggleListPublic,\n                addToList,\n                removeFromList,\n                isInList,\n                getShareLink,\n            }}\n        >\n            {children}\n        </ListsContext.Provider>\n    );\n}\n\nexport function useLists() {\n    const context = useContext(ListsContext);\n    if (!context) {\n        throw new Error(\"useLists must be used within ListsProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1511, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/SocialContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nconst SocialContext = createContext();\n\nexport function SocialProvider({ children }) {\n    const { user, isSignedIn } = useUser();\n    const [following, setFollowing] = useState([]);\n    const [followers, setFollowers] = useState([]);\n    const [activityFeed, setActivityFeed] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    // Load social data\n    useEffect(() => {\n        const loadSocialData = async () => {\n            try {\n                if (isSignedIn && user) {\n                    const socialData = user.unsafeMetadata?.social || {};\n                    setFollowing(socialData.following || []);\n                    setFollowers(socialData.followers || []);\n                    setActivityFeed(socialData.activityFeed || []);\n                } else {\n                    const local = localStorage.getItem(\"socialData\");\n                    if (local) {\n                        const parsed = JSON.parse(local);\n                        setFollowing(parsed.following || []);\n                        setActivityFeed(parsed.activityFeed || []);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Failed to load social data:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        loadSocialData();\n    }, [user, isSignedIn]);\n\n    // Save social data\n    const saveSocialData = async (data) => {\n        try {\n            if (isSignedIn && user) {\n                await user.update({\n                    unsafeMetadata: {\n                        ...user.unsafeMetadata,\n                        social: data,\n                    },\n                });\n            } else {\n                localStorage.setItem(\"socialData\", JSON.stringify(data));\n            }\n        } catch (error) {\n            console.error(\"Failed to save social data:\", error);\n        }\n    };\n\n    // Follow a user\n    const followUser = async (targetUser) => {\n        if (following.some(f => f.id === targetUser.id)) return;\n\n        const newFollowing = [...following, {\n            id: targetUser.id,\n            username: targetUser.username || targetUser.firstName || \"User\",\n            imageUrl: targetUser.imageUrl,\n            followedAt: new Date().toISOString(),\n        }];\n\n        setFollowing(newFollowing);\n        await saveSocialData({ following: newFollowing, followers, activityFeed });\n\n        // Add activity\n        addActivity({\n            type: \"follow\",\n            targetUser: targetUser.username || targetUser.firstName,\n            targetUserId: targetUser.id,\n        });\n    };\n\n    // Unfollow a user\n    const unfollowUser = async (userId) => {\n        const newFollowing = following.filter(f => f.id !== userId);\n        setFollowing(newFollowing);\n        await saveSocialData({ following: newFollowing, followers, activityFeed });\n    };\n\n    // Check if following\n    const isFollowing = (userId) => {\n        return following.some(f => f.id === userId);\n    };\n\n    // Add activity\n    const addActivity = async (activity) => {\n        const newActivity = {\n            id: `activity-${Date.now()}`,\n            userId: user?.id || \"guest\",\n            username: user?.username || user?.firstName || \"Guest\",\n            userImage: user?.imageUrl,\n            timestamp: new Date().toISOString(),\n            ...activity,\n        };\n\n        const newFeed = [newActivity, ...activityFeed].slice(0, 50); // Keep last 50\n        setActivityFeed(newFeed);\n        await saveSocialData({ following, followers, activityFeed: newFeed });\n    };\n\n    // Get user profile data\n    const getProfile = () => {\n        if (!isSignedIn || !user) return null;\n\n        return {\n            id: user.id,\n            username: user.username || user.firstName || \"User\",\n            firstName: user.firstName,\n            lastName: user.lastName,\n            imageUrl: user.imageUrl,\n            email: user.primaryEmailAddress?.emailAddress,\n            createdAt: user.createdAt,\n            followingCount: following.length,\n            followersCount: followers.length,\n        };\n    };\n\n    return (\n        <SocialContext.Provider\n            value={{\n                following,\n                followers,\n                activityFeed,\n                loading,\n                followUser,\n                unfollowUser,\n                isFollowing,\n                addActivity,\n                getProfile,\n            }}\n        >\n            {children}\n        </SocialContext.Provider>\n    );\n}\n\nexport function useSocial() {\n    const context = useContext(SocialContext);\n    if (!context) {\n        throw new Error(\"useSocial must be used within SocialProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1680, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/RecentlyViewedContext.jsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useState, useEffect, useCallback, useMemo } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nexport const RecentlyViewedContext = createContext();\n\nconst STORAGE_KEY = \"movie_catalogue_recently_viewed_v1\";\nconst MAX_ITEMS = 50; // Keep last 50 viewed items\n\nexport function RecentlyViewedProvider({ children }) {\n    const { user, isSignedIn, isLoaded } = useUser();\n    const [recentlyViewed, setRecentlyViewed] = useState([]);\n\n    // Load from storage\n    useEffect(() => {\n        if (!isLoaded) return;\n\n        if (isSignedIn && user) {\n            const userRecent = user.unsafeMetadata?.recentlyViewed || [];\n            setRecentlyViewed(userRecent);\n        } else {\n            try {\n                const raw = localStorage.getItem(STORAGE_KEY);\n                setRecentlyViewed(raw ? JSON.parse(raw) : []);\n            } catch {\n                setRecentlyViewed([]);\n            }\n        }\n    }, [isSignedIn, user, isLoaded]);\n\n    // Save to storage\n    useEffect(() => {\n        if (!isLoaded) return;\n\n        if (isSignedIn && user) {\n            user.update({\n                unsafeMetadata: {\n                    ...user.unsafeMetadata,\n                    recentlyViewed: recentlyViewed\n                }\n            }).catch(err => {\n                console.warn(\"Failed to save recently viewed to Clerk, using localStorage fallback:\", err.message || err);\n                localStorage.setItem(STORAGE_KEY, JSON.stringify(recentlyViewed));\n            });\n        } else {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(recentlyViewed));\n        }\n    }, [recentlyViewed, isSignedIn, user, isLoaded]);\n\n    const addToRecentlyViewed = useCallback((item) => {\n        setRecentlyViewed((prev) => {\n            // Remove if already exists\n            const filtered = prev.filter(i => i.id !== item.id || i.type !== (item.type || 'movie'));\n            \n            // Add to beginning\n            const minItem = {\n                id: item.id,\n                title: item.title || item.name,\n                poster_path: item.poster_path,\n                vote_average: item.vote_average,\n                release_date: item.release_date || item.first_air_date,\n                type: item.type || (item.name ? 'tv' : 'movie'),\n                viewedAt: new Date().toISOString()\n            };\n            \n            // Keep only last MAX_ITEMS\n            return [minItem, ...filtered].slice(0, MAX_ITEMS);\n        });\n    }, []);\n\n    const clearRecentlyViewed = useCallback(() => {\n        setRecentlyViewed([]);\n    }, []);\n\n    const removeFromRecentlyViewed = useCallback((id, type = 'movie') => {\n        setRecentlyViewed(prev => prev.filter(item => !(item.id === id && item.type === type)));\n    }, []);\n\n    const value = useMemo(() => ({\n        recentlyViewed,\n        addToRecentlyViewed,\n        clearRecentlyViewed,\n        removeFromRecentlyViewed,\n    }), [recentlyViewed, addToRecentlyViewed, clearRecentlyViewed, removeFromRecentlyViewed]);\n\n    return (\n        <RecentlyViewedContext.Provider value={value}>\n            {children}\n        </RecentlyViewedContext.Provider>\n    );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKO,MAAM,sCAAwB,IAAA,sNAAa;AAElD,MAAM,cAAc;AACpB,MAAM,YAAY,IAAI,4BAA4B;AAE3C,SAAS,uBAAuB,EAAE,QAAQ,EAAE;IAC/C,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG,IAAA,kLAAO;IAC9C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAEvD,oBAAoB;IACpB,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,UAAU;QAEf,IAAI,cAAc,MAAM;YACpB,MAAM,aAAa,KAAK,cAAc,EAAE,kBAAkB,EAAE;YAC5D,kBAAkB;QACtB,OAAO;YACH,IAAI;gBACA,MAAM,MAAM,aAAa,OAAO,CAAC;gBACjC,kBAAkB,MAAM,KAAK,KAAK,CAAC,OAAO,EAAE;YAChD,EAAE,OAAM;gBACJ,kBAAkB,EAAE;YACxB;QACJ;IACJ,GAAG;QAAC;QAAY;QAAM;KAAS;IAE/B,kBAAkB;IAClB,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,UAAU;QAEf,IAAI,cAAc,MAAM;YACpB,KAAK,MAAM,CAAC;gBACR,gBAAgB;oBACZ,GAAG,KAAK,cAAc;oBACtB,gBAAgB;gBACpB;YACJ,GAAG,KAAK,CAAC,CAAA;gBACL,QAAQ,IAAI,CAAC,yEAAyE,IAAI,OAAO,IAAI;gBACrG,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;YACrD;QACJ,OAAO;YACH,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACrD;IACJ,GAAG;QAAC;QAAgB;QAAY;QAAM;KAAS;IAE/C,MAAM,sBAAsB,IAAA,oNAAW,EAAC,CAAC;QACrC,kBAAkB,CAAC;YACf,2BAA2B;YAC3B,MAAM,WAAW,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE,IAAI,EAAE,IAAI,KAAK,CAAC,KAAK,IAAI,IAAI,OAAO;YAEtF,mBAAmB;YACnB,MAAM,UAAU;gBACZ,IAAI,KAAK,EAAE;gBACX,OAAO,KAAK,KAAK,IAAI,KAAK,IAAI;gBAC9B,aAAa,KAAK,WAAW;gBAC7B,cAAc,KAAK,YAAY;gBAC/B,cAAc,KAAK,YAAY,IAAI,KAAK,cAAc;gBACtD,MAAM,KAAK,IAAI,IAAI,CAAC,KAAK,IAAI,GAAG,OAAO,OAAO;gBAC9C,UAAU,IAAI,OAAO,WAAW;YACpC;YAEA,2BAA2B;YAC3B,OAAO;gBAAC;mBAAY;aAAS,CAAC,KAAK,CAAC,GAAG;QAC3C;IACJ,GAAG,EAAE;IAEL,MAAM,sBAAsB,IAAA,oNAAW,EAAC;QACpC,kBAAkB,EAAE;IACxB,GAAG,EAAE;IAEL,MAAM,2BAA2B,IAAA,oNAAW,EAAC,CAAC,IAAI,OAAO,OAAO;QAC5D,kBAAkB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,OAAQ,CAAC,CAAC,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI;IACxF,GAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,gNAAO,EAAC,IAAM,CAAC;YACzB;YACA;YACA;YACA;QACJ,CAAC,GAAG;QAAC;QAAgB;QAAqB;QAAqB;KAAyB;IAExF,qBACI,8OAAC,sBAAsB,QAAQ;QAAC,OAAO;kBAClC;;;;;;AAGb"}},
    {"offset": {"line": 1791, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/components/Providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { WatchlistProvider } from \"@/context/WatchlistContext\";\nimport { WatchedProvider } from \"@/context/WatchedContext\";\nimport { ReviewProvider } from \"@/context/ReviewContext\";\nimport { ListsProvider } from \"@/context/ListsContext\";\nimport { SocialProvider } from \"@/context/SocialContext\";\nimport { RecentlyViewedProvider } from \"@/context/RecentlyViewedContext\";\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n    return (\n        <QueryClientProvider client={queryClient}>\n            <WatchlistProvider>\n                <WatchedProvider>\n                    <RecentlyViewedProvider>\n                        <ReviewProvider>\n                            <ListsProvider>\n                                <SocialProvider>\n                                    {children}\n                                </SocialProvider>\n                            </ListsProvider>\n                        </ReviewProvider>\n                    </RecentlyViewedProvider>\n                </WatchedProvider>\n            </WatchlistProvider>\n        </QueryClientProvider>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACjE,qBACI,8OAAC,6MAAmB;QAAC,QAAQ,wJAAW;kBACpC,cAAA,8OAAC,wJAAiB;sBACd,cAAA,8OAAC,oJAAe;0BACZ,cAAA,8OAAC,kKAAsB;8BACnB,cAAA,8OAAC,kJAAc;kCACX,cAAA,8OAAC,gJAAa;sCACV,cAAA,8OAAC,kJAAc;0CACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrC"}},
    {"offset": {"line": 1864, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/context/TVWatchProgressContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useState, useEffect, useCallback, useMemo } from \"react\";\nimport { useUser } from \"@clerk/nextjs\";\n\nexport const TVWatchProgressContext = createContext<any>(null);\n\nconst STORAGE_KEY = \"tv_watch_progress_v1\";\n\n// Progress structure: { showId: { seasonNumber: { episodeNumber: true } } }\n\nexport function TVWatchProgressProvider({ children }: { children: React.ReactNode }) {\n    const { user, isSignedIn, isLoaded } = useUser();\n    const [progress, setProgress] = useState<Record<string, any>>({});\n\n    // Load from storage\n    useEffect(() => {\n        if (!isLoaded) return;\n\n        if (isSignedIn && user) {\n            const userProgress = user.unsafeMetadata?.tvProgress || {};\n            setProgress(userProgress);\n        } else {\n            try {\n                const raw = localStorage.getItem(STORAGE_KEY);\n                setProgress(raw ? JSON.parse(raw) : {});\n            } catch {\n                setProgress({});\n            }\n        }\n    }, [isSignedIn, user, isLoaded]);\n\n    // Save to storage\n    useEffect(() => {\n        if (!isLoaded) return;\n\n        if (isSignedIn && user) {\n            user.update({\n                unsafeMetadata: {\n                    ...user.unsafeMetadata,\n                    tvProgress: progress\n                }\n            }).catch(err => {\n                console.warn(\"Failed to save TV progress to Clerk, using localStorage:\", err.message || err);\n                localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));\n            });\n        } else {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));\n        }\n    }, [progress, isSignedIn, user, isLoaded]);\n\n    const markEpisodeWatched = useCallback((showId: number, season: number, episode: number) => {\n        setProgress(prev => ({\n            ...prev,\n            [showId]: {\n                ...(prev[showId] || {}),\n                [season]: {\n                    ...(prev[showId]?.[season] || {}),\n                    [episode]: true\n                }\n            }\n        }));\n    }, []);\n\n    const unmarkEpisodeWatched = useCallback((showId: number, season: number, episode: number) => {\n        setProgress(prev => {\n            const newProgress = { ...prev };\n            if (newProgress[showId]?.[season]) {\n                delete newProgress[showId][season][episode];\n                // Clean up empty objects\n                if (Object.keys(newProgress[showId][season]).length === 0) {\n                    delete newProgress[showId][season];\n                }\n                if (Object.keys(newProgress[showId]).length === 0) {\n                    delete newProgress[showId];\n                }\n            }\n            return newProgress;\n        });\n    }, []);\n\n    const isEpisodeWatched = useCallback((showId: number, season: number, episode: number) => {\n        return !!progress[showId]?.[season]?.[episode];\n    }, [progress]);\n\n    const getShowProgress = useCallback((showId: number, totalEpisodes: number) => {\n        const showProgress = progress[showId] || {};\n        let watchedCount = 0;\n        Object.values(showProgress).forEach((season: any) => {\n            watchedCount += Object.keys(season).length;\n        });\n        return {\n            watched: watchedCount,\n            total: totalEpisodes,\n            percentage: totalEpisodes > 0 ? (watchedCount / totalEpisodes) * 100 : 0\n        };\n    }, [progress]);\n\n    const getSeasonProgress = useCallback((showId: number, seasonNumber: number, totalEpisodes: number) => {\n        const seasonData = progress[showId]?.[seasonNumber] || {};\n        const watchedCount = Object.keys(seasonData).length;\n        return {\n            watched: watchedCount,\n            total: totalEpisodes,\n            percentage: totalEpisodes > 0 ? (watchedCount / totalEpisodes) * 100 : 0\n        };\n    }, [progress]);\n\n    const value = useMemo(() => ({\n        markEpisodeWatched,\n        unmarkEpisodeWatched,\n        isEpisodeWatched,\n        getShowProgress,\n        getSeasonProgress,\n        progress\n    }), [markEpisodeWatched, unmarkEpisodeWatched, isEpisodeWatched, getShowProgress, getSeasonProgress, progress]);\n\n    return (\n        <TVWatchProgressContext.Provider value={value}>\n            {children}\n        </TVWatchProgressContext.Provider>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2011, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/components/EasterEgg.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport dynamic from 'next/dynamic';\n\nconst Confetti = dynamic(() => import('react-confetti'), { ssr: false });\n\nexport function EasterEgg() {\n    const [showConfetti, setShowConfetti] = useState(false);\n    const [inputSequence, setInputSequence] = useState<string[]>([]);\n    const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n\n    useEffect(() => {\n        // Set dimensions on client side only\n        setDimensions({\n            width: window.innerWidth,\n            height: window.innerHeight\n        });\n\n        const handleResize = () => {\n            setDimensions({\n                width: window.innerWidth,\n                height: window.innerHeight\n            });\n        };\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    // Konami Code: Up, Up, Down, Down, Left, Right, Left, Right, B, A\n    const KONAMI_CODE = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];\n\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            const key = e.key;\n\n            setInputSequence((prev) => {\n                const updated = [...prev, key];\n\n                // Check if updated sequence matches the end of Konami Code\n                if (updated.length > KONAMI_CODE.length) {\n                    updated.shift();\n                }\n\n                if (JSON.stringify(updated) === JSON.stringify(KONAMI_CODE)) {\n                    triggerEasterEgg();\n                    return [];\n                }\n\n                return updated;\n            });\n        };\n\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, []);\n\n    const triggerEasterEgg = () => {\n        setShowConfetti(true);\n        // Play sound if you have one, or just confetti\n        setTimeout(() => setShowConfetti(false), 5000);\n    };\n\n    if (!showConfetti) return null;\n\n    return (\n        <div className=\"fixed inset-0 pointer-events-none z-[100]\">\n            <Confetti width={dimensions.width} height={dimensions.height} />\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;AAHA;;;;AAKA,MAAM,WAAW,IAAA,0KAAO;;;;;;IAAmC,KAAK;;AAEzD,SAAS;IACZ,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAC/D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;QAAE,OAAO;QAAG,QAAQ;IAAE;IAEnE,IAAA,kNAAS,EAAC;QACN,qCAAqC;QACrC,cAAc;YACV,OAAO,OAAO,UAAU;YACxB,QAAQ,OAAO,WAAW;QAC9B;QAEA,MAAM,eAAe;YACjB,cAAc;gBACV,OAAO,OAAO,UAAU;gBACxB,QAAQ,OAAO,WAAW;YAC9B;QACJ;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACtD,GAAG,EAAE;IAEL,kEAAkE;IAClE,MAAM,cAAc;QAAC;QAAW;QAAW;QAAa;QAAa;QAAa;QAAc;QAAa;QAAc;QAAK;KAAI;IAEpI,IAAA,kNAAS,EAAC;QACN,MAAM,gBAAgB,CAAC;YACnB,MAAM,MAAM,EAAE,GAAG;YAEjB,iBAAiB,CAAC;gBACd,MAAM,UAAU;uBAAI;oBAAM;iBAAI;gBAE9B,2DAA2D;gBAC3D,IAAI,QAAQ,MAAM,GAAG,YAAY,MAAM,EAAE;oBACrC,QAAQ,KAAK;gBACjB;gBAEA,IAAI,KAAK,SAAS,CAAC,aAAa,KAAK,SAAS,CAAC,cAAc;oBACzD;oBACA,OAAO,EAAE;gBACb;gBAEA,OAAO;YACX;QACJ;QAEA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACvD,GAAG,EAAE;IAEL,MAAM,mBAAmB;QACrB,gBAAgB;QAChB,+CAA+C;QAC/C,WAAW,IAAM,gBAAgB,QAAQ;IAC7C;IAEA,IAAI,CAAC,cAAc,OAAO;IAE1B,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAS,OAAO,WAAW,KAAK;YAAE,QAAQ,WAAW,MAAM;;;;;;;;;;;AAGxE"}},
    {"offset": {"line": 2114, "column": 0}, "map": {"version":3,"sources":["file:///home/shivam/TheMovie/src/components/ScrollToTop.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { ArrowUp } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nexport function ScrollToTop() {\n    const [isVisible, setIsVisible] = useState(false);\n\n    useEffect(() => {\n        const toggleVisibility = () => {\n            if (window.pageYOffset > 300) {\n                setIsVisible(true);\n            } else {\n                setIsVisible(false);\n            }\n        };\n\n        window.addEventListener(\"scroll\", toggleVisibility);\n\n        return () => window.removeEventListener(\"scroll\", toggleVisibility);\n    }, []);\n\n    const scrollToTop = () => {\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        });\n    };\n\n    return (\n        <AnimatePresence>\n            {isVisible && (\n                <motion.button\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: 20 }}\n                    onClick={scrollToTop}\n                    className=\"fixed bottom-20 right-4 sm:bottom-8 sm:right-8 z-50 p-3 sm:p-4 bg-accent-primary hover:bg-accent-primary/90 text-white rounded-full shadow-2xl shadow-accent-primary/30 transition-all hover:scale-110\"\n                    aria-label=\"Scroll to top\"\n                >\n                    <ArrowUp size={20} />\n                </motion.button>\n            )}\n        </AnimatePresence>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;AAMO,SAAS;IACZ,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACN,MAAM,mBAAmB;YACrB,IAAI,OAAO,WAAW,GAAG,KAAK;gBAC1B,aAAa;YACjB,OAAO;gBACH,aAAa;YACjB;QACJ;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACtD,GAAG,EAAE;IAEL,MAAM,cAAc;QAChB,OAAO,QAAQ,CAAC;YACZ,KAAK;YACL,UAAU;QACd;IACJ;IAEA,qBACI,8OAAC,4MAAe;kBACX,2BACG,8OAAC,oMAAM,CAAC,MAAM;YACV,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,MAAM;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC1B,SAAS;YACT,WAAU;YACV,cAAW;sBAEX,cAAA,8OAAC,uNAAO;gBAAC,MAAM;;;;;;;;;;;;;;;;AAKnC"}}]
}